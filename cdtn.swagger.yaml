openapi: 3.0.4
info:
  title: Chuyên đề tốt nghiệp quản lí quán ăn
  description: |-
    This is a sample Pet Store Server based on the OpenAPI 3.0 specification.  You can find out more about
    Swagger at [https://swagger.io](https://swagger.io). In the third iteration of the pet store, we've switched to the design first approach!
    You can now help us improve the API whether it's by making changes to the definition itself or to the code.
    That way, with time, we can improve the API in general, and expose some of the new features in OAS3.

    Some useful links:
    - [The Pet Store repository](https://github.com/swagger-api/swagger-petstore)
    - [The source API definition for the Pet Store](https://github.com/swagger-api/swagger-petstore/blob/master/src/main/resources/openapi.yaml)
  termsOfService: https://swagger.io/terms/
  contact:
    email: apiteam@swagger.io
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  version: 1.0.12
externalDocs:
  description: Find out more about Swagger
  url: https://swagger.io
servers:
  - url: https://cdtn-be-one.vercel.app/admin
  - url: http://localhost:3000/admin
tags:
  - name: account
    description: Các logic liên quan đến account
  - name: table
    description: Các logic liên quan đến table
  - name: supplier
    description: Các logic liên quan đến supplier
  
    

paths:
  /accounts/login:
    post:
      tags:
        - account
      summary: Đăng nhập
      description: Đăng nhập
      operationId: login
      requestBody:
        description: Thông tin đăng nhập
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: admin1@gmail.com
                password:
                  type: string
                  example: Benten123@!
        required: true
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: 
                    type: string
                    example: "Login successful"
                  result: 
                    type: object
                    example:
                      accesss_token:
                        type: string
                        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkwMzY4ZWYxODkwZmU1YWFmYzIyYmYxIiwidG9rZW5fdHlwZSI6MCwidmVyaWZ5IjoxLCJyb2xlIjoxLCJpYXQiOjE3NjI2OTg4ODIsImV4cCI6MTc2MjY5OTE4Mn0.m5OrlzFwQSW96FQhLA3cFegikk8rsSJHqxoJQZsLXCo
                      refresh_token: 
                        type: string
                        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkwMzY4ZWYxODkwZmU1YWFmYzIyYmYxIiwidG9rZW5fdHlwZSI6MSwidmVyaWZ5IjoxLCJyb2xlIjoxLCJpYXQiOjE3NjI2OTg4ODIsImV4cCI6MTc3MTMzODg4Mn0.P7nCfb5bxmKxkI4Hn8YJzHLyMiZ0NEP_bGFw3tEoJqk
        '400':
          description: Email or password is incorrect
        '422':
          description: Validation error
  /accounts/register:
    post:
      tags:
        - account
      summary: Register a new user
      operationId: accountsRegister
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
                password:
                  type: string
                confirm_password:
                  type: string
                date_of_birth:
                  type: string
                  format: date-time
                role_id:
                  type: string
              required:
                - name
                - email
                - password
                - confirm_password
                - date_of_birth
                - role_id
            example:
              name: "Gao red 2"
              email: "nhanvien2+2@gmail.com"
              password: "Benten123@!"
              confirm_password: "Benten123@!"
              date_of_birth: "1999-01-20T00:00:00Z"
              role_id: "691a9a6f7800bd3806be258e"
      responses:
        200:
          description: Registration successful
          content:
            application/json:
              example:
                message: "Registration successful. Please check your email to verify your account."
                result:
                  access_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkxZDRlZDcxYjRmNDljZGFkYzBkYzA2IiwidG9rZW5fdHlwZSI6ImFjY2Vzc190b2tlbiIsInZlcmlmeSI6InVudmVyaWZpZWQiLCJyb2xlX25hbWUiOiJFbXBsb3llZSIsInBlcm1pc3Npb25zIjpbInZpZXdfaW1wb3J0X29yZGVyX2RldGFpbCIsImRlbGV0ZV9kaXNoIiwidmlld19pbXBvcnRfb3JkZXJfbGlzdCIsImNyZWF0ZV9kaXNoIiwiY3JlYXRlX2ltcG9ydF9vcmRlciIsInZpZXdfZGlzaGVzIiwidXBkYXRlX2Rpc2giLCJ2aWV3X2Rhc2hib2FyZCJdLCJpYXQiOjE3NjM1Mjg0MTEsImV4cCI6MTc2MzUyOTMxMX0.bwfoQx9EH-1q3tRiZyz1Ku3szXOL9LLkB0yYJTyh68c"
                  refresh_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkxZDRlZDcxYjRmNDljZGFkYzBkYzA2IiwidG9rZW5fdHlwZSI6InJlZnJlc2hfdG9rZW4iLCJ2ZXJpZnkiOiJ1bnZlcmlmaWVkIiwiaWF0IjoxNzYzNTI4NDExLCJleHAiOjE3NzIxNjg0MTF9.jtMZT-UP-4hsmAFIGe7wq0QqXX1ZoDOqeatxRk9aLMw"
        409:
          description: Email already exists
          content:
            application/json:
              example:
                message: "This email already exists"
        422:
          description: Validation error
  /accounts/logout:
    post:
      tags:
        - account
      summary: Logout user
      operationId: accountsLogout
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                refresh_token:
                  type: string
              required:
                - refresh_token
            example:
              refresh_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
      responses:
        200:
          description: Logout successfully
          content:
            application/json:
              example:
                message: "Logout successfully"
        401:
          description: Used refresh token or not exist
          content:
            application/json:
              example:
                message: "Used refresh token or not exist"
  /accounts/refresh-token:
    post:
      tags:
        - account
      summary: Refresh access token
      operationId: accountsRefreshToken
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                refresh_token:
                  type: string
              required:
                - refresh_token
            example:
              refresh_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
      responses:
        200:
          description: Refresh token success
          content:
            application/json:
              example:
                message: "Refresh token success"
                result:
                  access_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkxNmUyNTA5OGQ5YzViYjk1ZDI2ZTBiIiwidG9rZW5fdHlwZSI6ImFjY2Vzc190b2tlbiIsInZlcmlmeSI6InZlcmlmaWVkIiwicm9sZV9uYW1lIjoiQWRtaW4iLCJwZXJtaXNzaW9ucyI6WyJ2aWV3X29yZGVycyIsInVwZGF0ZV9pbmdyZWRpZW50IiwiZGVsZXRlX2luZ3JlZGllbnQiLCJ2aWV3X2Rhc2hib2FyZCIsInZpZXdfc3VwcGxpZXJzIiwiZGVsZXRlX2Rpc2giLCJ1cGRhdGVfcm9sZSIsInZpZXdfaW5ncmVkaWVudHMiLCJjcmVhdGVfdGFibGUiLCJjcmVhdGVfaW5ncmVkaWVudCIsInZpZXdfdGFibGVzIiwiZGVsZXRlX3JvbGUiLCJ2aWV3X2Rpc2hfY2F0ZWdvcnlfbGlzdCIsInZpZXdfaW1wb3J0X29yZGVyX2xpc3QiLCJkZWxldGVfZGlzaF9jYXRlZ29yeSIsImNyZWF0ZV9pbmdyZWRpZW50X2NhdGVnb3J5IiwidXBkYXRlX2Rpc2hfY2F0ZWdvcnkiLCJ2aWV3X2luZ3JlZGllbnRfY2F0ZWdvcnlfbGlzdCIsInVwZGF0ZV9kaXNoIiwiY3JlYXRlX3JvbGUiLCJ1cGRhdGVfaW5ncmVkaWVudF9jYXRlZ29yeSIsImNyZWF0ZV9kaXNoIiwiZGVsZXRlX2luZ3JlZGllbnRfY2F0ZWdvcnkiLCJ2aWV3X2Rpc2hlcyIsInZpZXdfaW1wb3J0X29yZGVyX2RldGFpbCIsImRlbGV0ZV9hY2NvdW50Iiwidmlld19yb2xlcyIsInJlZ2VuZXJhdGVfdGFibGVfcXIiLCJ2aWV3X2FjY291bnRzIiwiY3JlYXRlX2Rpc2hfY2F0ZWdvcnkiLCJjcmVhdGVfYWNjb3VudCIsImRlbGV0ZV90YWJsZSIsInVwZGF0ZV9hY2NvdW50IiwiY3JlYXRlX2ltcG9ydF9vcmRlciIsInVwZGF0ZV90YWJsZSIsImNhbmNlbF9vcmRlciIsImNyZWF0ZV9zdXBwbGllciIsInVwZGF0ZV9vcmRlcl9zdGF0dXMiLCJ1cGRhdGVfc3VwcGxpZXIiLCJkZWxldGVfc3VwcGxpZXIiXSwiaWF0IjoxNzYzNTI4OTA2LCJleHAiOjE3NjM1Mjk4MDZ9.wwMR3IXblT0CBobLb3uZXdZn_uObX1On4QpXuMRgO1Y"
                  refresh_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkxNmUyNTA5OGQ5YzViYjk1ZDI2ZTBiIiwidG9rZW5fdHlwZSI6InJlZnJlc2hfdG9rZW4iLCJ2ZXJpZnkiOiJ2ZXJpZmllZCIsImlhdCI6MTc2MzUyODkwNiwiZXhwIjoxNzcyMTY4OTA2fQ.ZMsNR8ZEBRgSlFypHWxh2RaPx5KyaoK5n6MnPoUSYPw"
        401:
          description: Invalid token
          content:
            application/json:
              example:
                message: "Invalid token"
  /accounts/verify-email:
    post:
      tags:
        - account
      summary: Verify email
      operationId: accountsVerifyEmail
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email_verify_token:
                  type: string
              required:
                - email_verify_token
            example:
              email_verify_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkxZDRlZDcxYjRmNDljZGFkYzBkYzA2IiwiVG9rZW5UeXBlIjoiZW1haWxfdmVyaWZ5X3Rva2VuIiwidmVyaWZ5IjoidW52ZXJpZmllZCIsImlhdCI6MTc2MzUyODQwNywiZXhwIjoxNzY0MTMzMjA3fQ.nAO5y3Mi5gpnJbx9ELjV9Zyp_PmNZ64G5ZPgY2hY3NQ"
      responses:
        200:
          description: Verify email success
          content:
            application/json:
              example:
                message: "Verify email success"
                result:
                  access_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkxZDRlZDcxYjRmNDljZGFkYzBkYzA2IiwidG9rZW5fdHlwZSI6ImFjY2Vzc190b2tlbiIsInZlcmlmeSI6InVudmVyaWZpZWQiLCJyb2xlX25hbWUiOiJFbXBsb3llZSIsInBlcm1pc3Npb25zIjpbInZpZXdfZGFzaGJvYXJkIiwidXBkYXRlX2Rpc2giLCJjcmVhdGVfaW1wb3J0X29yZGVyIiwidmlld19kaXNoZXMiLCJ2aWV3X2ltcG9ydF9vcmRlcl9saXN0IiwiY3JlYXRlX2Rpc2giLCJ2aWV3X2ltcG9ydF9vcmRlcl9kZXRhaWwiLCJkZWxldGVfZGlzaCJdLCJpYXQiOjE3NjM1MjkyMTcsImV4cCI6MTc2MzUzMDExN30.BjhQd7E845shZIdWVh2eOlU7dvEnqKKPxpADJsVkiyY"
                  refresh_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkxZDRlZDcxYjRmNDljZGFkYzBkYzA2IiwidG9rZW5fdHlwZSI6InJlZnJlc2hfdG9rZW4iLCJ2ZXJpZnkiOiJ1bnZlcmlmaWVkIiwiaWF0IjoxNzYzNTI5MjE3LCJleHAiOjE3NzIxNjkyMTd9.fuuuNlvtJNDaWui6cUEnHwn1bJqk532HK8JLf6PabnQ"
  /accounts/resend-verify-email:
    post:
      operationId: accountsResendVerifyEmail
      tags:
        - account
      summary: Resend email verification
      security:
        - BearerAuth: []
      responses:
        200:
          description: Verification email resent successfully
          content:
            application/json:
              example:
                message: "A new verification email has been sent. Please check your inbox."
  /accounts/forgot-password:
    post:
      operationId: accountsForgotPassword
      tags:
        - account
      summary: Send password reset instructions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
              required:
                - email
            example:
              email: "nhanvien2+2@gmail.com"
      responses:
        200:
          description: Password reset instructions sent
          content:
            application/json:
              example:
                message: "We have sent instructions to reset your password. Please check your inbox (and spam folder) to complete the process."
        422:
          description: Validation error
  /accounts/verify-forgot-password:
    post:
      operationId: accountsVerifyForgotPassword
      tags:
        - account
      summary: Verify forgot password token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                forgot_password_token:
                  type: string
              required:
                - forgot_password_token
            example:
              forgot_password_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkxNmUyNTA5OGQ5YzViYjk1ZDI2ZTBiIiwiVG9rZW5UeXBlIjoiZm9yZ290X3Bhc3N3b3JkX3Rva2VuIiwidmVyaWZ5IjoidmVyaWZpZWQiLCJpYXQiOjE3NjM1MzAwMzksImV4cCI6MTc2NDEzNDgzOX0.f9Jx38ee-Y7KlnT3a9fC0fqye_rOVktMy1QRBskwvTE"
      responses:
        200:
          description: Verify forgot password token success
          content:
            application/json:
              example:
                message: "Verify forgot password token success"
        400:
          description: Forgot password token is required
          content:
            application/json:
              example:
                message: "Forgot password token is required."
        401:
          description: Invalid token
          content:
            application/json:
              example:
                message: "Invalid token"
  /accounts/reset-password:
    post:
      operationId: accountsResetPassword
      tags:
        - account
      summary: Reset user password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                forgot_password_token:
                  type: string
                password:
                  type: string
                confirm_password:
                  type: string
              required:
                - forgot_password_token
                - password
                - confirm_password
            example:
              forgot_password_token: "yJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkxMmFmMmU5YjJmYjFiYWIxM2QxODU4IiwiVG9rZW5UeXBlIjoiZm9yZ290X3Bhc3N3b3JkX3Rva2VuIiwidmVyaWZ5IjoidmVyaWZpZWQiLCJpYXQiOjE3NjI4MzMxMTAsImV4cCI6MTc2MzQzNzkxMH0.38A8s9fITIRbYUgk5we18NY75T4STZ6e84PBW6azsW0"
              password: "Minhnguyen123@"
              confirm_password: "Minhnguyen123@"
      responses:
        200:
          description: Password reset successfully
          content:
            application/json:
              example:
                message: "Your password has been reset successfully. You can now login with your new password."
        400:
          description: Forgot password token is required
          content:
            application/json:
              example:
                message: "Forgot password token is required."
        401:
          description: Invalid token
          content:
            application/json:
              example:
                message: "Invalid token"
        422:
          description: Validation error
          content:
            application/json:
              example:
                message: "Validation error"
  /accounts/me:
    get:
      operationId: accountsGetMe
      tags:
        - account
      summary: Get current user profile
      security:
        - BearerAuth: []
      responses:
        200:
          description: Get my profile success
          content:
            application/json:
              example:
                message: "Get my profile success"
                result:
                  _id: "6916e25098d9c5bb95d26e0b"
                  name: "AKA Bui Hieu"
                  email: "admin1@gmail.com"
                  date_of_birth: "2025-11-16T14:26:24.000Z"
                  avatar: ""
                  role_name: "Admin"
        401:
          description: Access token is required
          content:
            application/json:
              example:
                message: "Access token is required"
  /accounts/change-password:
    post:
      operationId: accountsChangePassword
      tags:
        - account
      summary: Change user password
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                old_password:
                  type: string
                password:
                  type: string
                confirm_password:
                  type: string
              required:
                - old_password
                - password
                - confirm_password
            example:
              old_password: "MinhNguyen123@"
              password: "MinhOkela123#@1"
              confirm_password: "MinhOkela123#@1"
      responses:
        200:
          description: Password changed successfully
          content:
            application/json:
              example:
                message: "Your password has been changed successfully."
        401:
          description: Old password is not correct
          content:
            application/json:
              example:
                message: "Your old password is not correct."
        422:
          description: Validation error
          content:
            application/json:
              example:
                message: "Validation error"
  /accounts:
    get:
      operationId: accountsGetList
      tags:
        - account
      summary: Get list of accounts with pagination and filters
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: Number of items per page
        - in: query
          name: search
          schema:
            type: string
          description: Search by name or email
        - in: query
          name: roleId
          schema:
            type: string
          description: Filter by role ID
      responses:
        200:
          description: Get list of accounts successfully
          content:
            application/json:
              example:
                message: "Get list of accounts successfully"
                result:
                  accounts:
                    - _id: "691d4ed71b4f49cdadc0dc06"
                      name: "Gao red 2"
                      email: "nhanvien2+3@gmail.com"
                      date_of_birth: "1999-01-20T00:00:00.000Z"
                      avatar: ""
                      role_name: "Employee"
                    - _id: "691c91d732db64f4a94babf9"
                      name: "Gao red 2"
                      email: "nhanvien2+2@gmail.com"
                      date_of_birth: "1999-01-20T00:00:00.000Z"
                      avatar: ""
                      role_name: "Employee"
                    - _id: "691c8fa12d5a0b22275915d1"
                      name: "Gao red 2"
                      email: "nhanvien2+1@gmail.com"
                      date_of_birth: "1999-01-20T00:00:00.000Z"
                      avatar: ""
                      role_name: "Employee"
                    - _id: "691c89dff02889e3344bb0ea"
                      name: "Gao red 2"
                      email: "nhanvien2@gmail.com"
                      date_of_birth: "1999-01-20T00:00:00.000Z"
                      avatar: ""
                      role_name: "Employee"
                    - _id: "691a9abf7800bd3806be258f"
                      name: "Gao red"
                      email: "nhanvien1@gmail.com"
                      date_of_birth: "1999-01-20T00:00:00.000Z"
                      avatar: ""
                      role_name: "Employee"
                    - _id: "6916e25098d9c5bb95d26e0b"
                      name: "AKA Bui Hieu"
                      email: "admin1@gmail.com"
                      date_of_birth: "2025-11-16T14:26:24.000Z"
                      avatar: ""
                      role_name: "Admin"
                  pagination:
                    currentPage: 1
                    limit: 10
                    total: 6
                    totalPages: 1
        401:
          description: Invalid signature
          content:
            application/json:
              example:
                message: "Invalid signature"


  /tables:
    post:
        tags:
          - table
        summary: Tạo mới tables
        description: Tạo mới tables
        operationId: createTable
        requestBody:
          description: Thông tin tạo mới table
          content:
            application/json:
              schema:
                type: object
                properties:
                  capacity:
                    type: number
                    example: 8
          required: true
        security:
          - BearerAuth: []
        responses:
          '200':
            description: successful operation
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    message: 
                      type: string
                      example: Table created successfully.
                    result: 
                      type: object
                      example:
                        QRcode:
                          type: string
                          example: "data:image/png;base64,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"
                        table: 
                          type: object
                          properties:
                            id:
                              type: string
                              format: MongoId
                              example: 69114df7111e533f4e76600e
                            number:
                              type: integer
                              example: 9
                            capacity:
                              type: integer
                              example: 12
                            status:
                              type: integer
                              example: 0
                            currentOrderId:
                              type: string
                              nullable: true
                              example: null
                            createdAt:
                              type: string
                              format: date-time
                              example: 2025-11-10T02:29:11.676Z
                            updatedAt:
                              type: string
                              format: date-time
                              example: 2025-11-10T02:29:11.676Z
          '401':
            description: Access token is required
          '422':
            description: Validation error
    get:
      tags:
        - table
      summary: Lấy danh sách bàn
      description: Lấy danh sách bàn bao gồm phân trang và lọc theo trạng thái (Sử dụng 0, 1, 2, 3 tương ứng với Available, Occupied, Reserved, Needs_cleaning)
      operationId: getAllTable
      parameters:
        - name: page
          in: query
          description: Phân trang
          required: false
          schema:
            type: string
        - name: status
          in: query
          description: Tìm kiếm theo trạng thái bàn
          required: false
          schema:
            type: number

      security:
        - BearerAuth: []
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: 
                    type: string
                    example: "Get all tables successfully."
                  tables: 
                    type: array
                    description: Danh sách các bàn
                    items:
                      $ref: '#/components/schemas/Table'
                  currentPage:
                    type: integer
                    description: Trang hiện tại
                    example: 1
                  limit:
                    type: integer
                    description: Số lượng bàn trên mỗi trang
                    example: 4
                  skip:
                    type: integer
                    description: Số lượng bàn đã bỏ qua
                    example: 0
                  totalPage:
                    type: integer
                    description: Tổng số trang
                    example: 3
        '401':
          description: Access token is required
        '422':
          description: Validation error
  /tables/{id}:
    patch:
      tags:
        - table
      summary: Cập nhật thông tin bàn
      description: Cập nhật thông tin bàn (Hiện tại là Số ghế và trạng thái)
      operationId: updateTable
      parameters:
        - name: id
          in: path
          description: Id của bàn cập nhật
          required: true
          schema:
            type: string
            format: MongoId
            example: "6908bd8b93418ddd670d7098" 
      requestBody:
        description: Các trường cần cập nhật. Bạn có thể gửi 1 trong 2 trường, hoặc cả 2.
        required: true # Bản thân object body là bắt buộc, nhưng các trường bên trong là không
        content:
          application/json:
            schema:
              # Tham chiếu đến một schema mới ta sẽ tạo ở bước 2
              $ref: '#/components/schemas/UpdateTableRequest'

      security:
        - BearerAuth: []
      responses:
        '200':
          description: Cập nhật bàn thành công. Trả về thông tin bàn đã được cập nhật.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Table' 
        '400':
          description: Dữ liệu gửi lên không hợp lệ
        '401':
          description: Lỗi xác thực (chưa đăng nhập hoặc không có quyền)
        '404':
          description: Không tìm thấy bàn với ID được cung cấp
  /tables/{id}/qr-token:
    patch:
      tags:
        - table
      summary: Thay đổi mã QRCode
      description: Thay đổi qrToken -> thay đổi QRCode
      operationId: regenerateQrToken
      parameters:
        - name: id
          in: path
          description: Id của bàn cập nhật
          required: true
          schema:
            type: string
            format: MongoId
            example: "6908bd8b93418ddd670d7098" 
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Cập nhật bàn thành công. Trả về thông tin bàn đã được cập nhật.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: 
                    type: string
                    example: "QR token regenerated successfully."
                  table:
                    type: object
                    properties:
                      orderUrl: 
                        type: string
                        example: "https://your-app-frontend.com/order?token=0d1b932af96cc87a3e575e0cfbb1aba7dba64713"
                      QRtable: 
                        type: string
                        example: "data:image/png;base64,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"

        '400':
          description: Dữ liệu gửi lên không hợp lệ
        '401':
          description: Lỗi xác thực (chưa đăng nhập hoặc không có quyền)
        '404':
          description: Không tìm thấy bàn với ID được cung cấp
  
  /suppliers:
    get:
      tags:
        - supplier
      summary: Lấy danh sách thông tin nhà cung cấp
      description: Lấy danh sách thông tin nhà cung cấp
      operationId: getAllSupplier
      security:
        - BearerAuth: []
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: 
                    type: string
                    example: "Get all supplier successfully."
                  tables: 
                    type: array
                    description: Danh sách các nhà cung cấp
                    items:
                      $ref: '#/components/schemas/Table'
        '401':
          description: Access token is required
    post:
      tags:
        - supplier
      summary: Tạo mới nhà cung cấp nguyên liệu
      description: Tạo mới nhà cung cấp nguyên liệu
      operationId: createSupplier
      requestBody:
        description: Thông tin tạo mới nhà cung cấp
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSupplierBody'
        required: true
      security:
        - BearerAuth: [] 
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: 
                    type: string
                    example: "Supplier created successfully."
                  result: 
                    type: object
                    description: Nhà cung cấp vừa được tạo mới
                    $ref: '#/components/schemas/Supplier'
        '401':
          description: Access token is required
        '422':
          description: Validation error
  /suppliers/{supplier_id}:
    patch:
      tags:
        - supplier
      summary: Cập nhật thông tin nhà cung cấp
      description: Cập nhật thông tin nhà cung cấp
      operationId: updateSupplier
      requestBody:
        description: Thông tin cập nhật nhà cung cấp
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSupplierBody'
        required: true
      parameters:
        - name: supplier_id
          in: path
          description: Id của nhà cung cấp (supplier)
          required: true
          schema:
            type: string
            example: 6912ac85d509c162b40b2e77
      security:
        - BearerAuth: [] 
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: 
                    type: string
                    example: "Supplier created successfully."
                  result: 
                    type: object
                    description: Nhà cung cấp vừa được tạo mới
                    $ref: '#/components/schemas/Supplier'
        '400':
          description: The provided ID is not a valid MongoDB ObjectId format.
        '401':
          description: Access token is required
        '404':
          description: Supplier not found
        '422':
          description: Validation error
    delete:
      tags:
        - supplier
      summary: Xóa nhà cung cấp 
      description: Xóa nhà cung cấp (Xóa mềm)
      operationId: deleteSupplier
      parameters:
        - name: supplier_id
          in: path
          description: Id của nhà cung cấp (supplier)
          required: true
          schema:
            type: string
            example: 6912ac85d509c162b40b2e77
      security:
        - BearerAuth: [] 
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: 
                    type: string
                    example: "Delete supplier successfully"
        '400':
          description: The provided ID is not a valid MongoDB ObjectId format.
        '401':
          description: Access token is required
        '404':
          description: Supplier not found
        '422':
          description: Validation error
  /permissions:
    post:
      tags:
          - Permission
      summary: Tạo mới quyền
      description: Tạo mới quyền
      operationId: createPermission
      requestBody:
        description: Thông tin tạo mới quyền
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/createPermissionReqBody'
        required: true
      security:
        - BearerAuth: [] 
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: 
                    type: string
                    example: "Create permission successfully."
                  result: 
                    type: object
                    description: Quyền vừa được tạo mới
                    $ref: '#/components/schemas/Permission'
        '401':
          description: Access token is required
        '422':
          description: Validation error
    get:
      tags:
        - Permission
      summary: Get all permissions
      description: Lấy danh sách tất cả quyền trong hệ thống.
      operationId: getAllPermission
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Get all permissions success
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Get all permissions success
                  result:
                    type: array
                    items:
                      $ref: "#/components/schemas/Permission"
  /permission/{permission_id}:
    put:
      tags:
        - Permission
      summary: Update a permission
      description: Cập nhật thông tin của một quyền.
      operationId: changePermiison
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: ID của permission cần cập nhật
          schema:
            type: string
            example: 6915916c7d31b24b66fd0c14
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdatePermissionReqBody"
            example:
              name: create_table
              description: Create a new table in the restaurant.
              module: table
      responses:
        "200":
          description: Update permission successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Update permission successfully.
                  result:
                    $ref: "#/components/schemas/Permission"
              example:
                message: Update permission successfully.
                result:
                  _id: 6915916c7d31b24b66fd0c14
                  name: create_table
                  description: Create a new table in the restaurant.
                  module: table
    delete:
      tags:
        - Permission
      summary: Delete a permission
      description: Xóa một quyền theo ID.
      operationId: deletePermiison
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: ID của permission cần xóa
          schema:
            type: string
            example: 6915916c7d31b24b66fd0c14
      responses:
        "200":
          description: Delete permission successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Delete permission successfully
              example:
                message: Delete permission successfully
        '400':
          description: The provided ID is not a valid MongoDB ObjectId format.
        '401':
          description: Access token is required
        '404':
          description: Permiission not found

  /roles: 
    post:
      tags:
        - Role
      summary: Create a new role
      description: Tạo một vai trò mới với danh sách quyền.
      operationId: createRole
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateRoleReqBody"
            example:
              name: Employee 1
              description: ""
              status: active
              permissionIds: ["6915915c7d31b24b66fd0c13","6915917c7d31b24b66fd0c15"]
      responses:
        "201":
          description: Create role successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Create role successfully.
                  result:
                    $ref: "#/components/schemas/Role"
              example:
                message: Create role successfully.
                result:
                  _id: 691aa3757800bd3806be2595
                  name: Employee 1
                  description: ""
                  status: active
                  permissionIds: ["6915915c7d31b24b66fd0c13","6915917c7d31b24b66fd0c15"]
    get:
      tags:
        - Role
      summary: Get all roles
      description: Lấy danh sách tất cả vai trò, kèm chi tiết quyền.
      operationId: getAllRoles
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Get all roles successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Get all roles successfully.
                  result:
                    type: array
                    items:
                      $ref: "#/components/schemas/RoleWithPermissions"
              example:
                message: Get all roles successfully.
                result:
                  - _id: 6911a5cbd2c16ce645a813a0
                    name: Admin
                    description: Admin's permissions
                    status: active
                    permissions:
                      - _id: 691593007d31b24b66fd0c2d
                        name: update_role
                        module: role
                      - _id: 6915918d7d31b24b66fd0c16
                        name: delete_table
                        module: table
                  - _id: 691a9a6f7800bd3806be258e
                    name: Employee
                    description: ""
                    status: active
                    permissions: []
                  - _id: 691aa3757800bd3806be2595
                    name: Employee 1
                    description: ""
                    status: active
                    permissions: []
  /roles/{role_id}:
    put:
      operationId: updateRole
      tags:
        - Role
      summary: Update a role
      description: Cập nhật thông tin của một role, bao gồm danh sách permissionIds.
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: ID của role cần update
          schema:
            type: string
            example: 6911a5cbd2c16ce645a813a0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateRoleReqBody"
            example:
              name: Admin
              description: Admin's permissions
              status: active
              permissionIds: [
                "6915919f7d31b24b66fd0c17",
                "6915915c7d31b24b66fd0c13",
                "6915917c7d31b24b66fd0c15"
              ]
      responses:
        "200":
          description: Update role successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Update role successfully.
                  result:
                    $ref: "#/components/schemas/Role"
              example:
                message: Update role successfully.
                result:
                  _id: 6911a5cbd2c16ce645a813a0
                  name: Admin
                  description: Admin's permissions
                  status: active
                  permissionIds: [
                    "6915919f7d31b24b66fd0c17",
                    "6915915c7d31b24b66fd0c13",
                    "6915917c7d31b24b66fd0c15",
                    "6915918d7d31b24b66fd0c16",
                    "6915916c7d31b24b66fd0c14",
                    "691592587d31b24b66fd0c23",
                    "691592807d31b24b66fd0c25",
                  ]
    delete:
      operationId: deleteRole
      tags:
        - Role
      summary: Delete a role
      description: Xóa một role theo ID.
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: ID của role cần xóa
          schema:
            type: string
            example: 691aa3757800bd3806be2595
      responses:
        "200":
          description: Delete role successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Delete role successfully.
              example:
                message: Delete role successfully.
  
  /import-orders:
    post:
      tags:
        - Import Orders
      summary: Create a new import order
      operationId: createImportOrder
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                supplierId:
                  type: string
                status:
                  $ref: "#/components/schemas/ImportOrderStatus"
                importDate:
                  type: string
                  format: date
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      ingredientId:
                        type: string
                      quantity:
                        type: number
                      importPrice:
                        type: number

                taxRate:
                  type: number
                  description: Optional tax rate (%)
                  example: 5

                notes:
                  type: string
                  description: Optional notes for the import order
                  example: "Hàng giao buổi sáng"

              required:
                - supplierId
                - importDate
                - items

            example:
              supplierId: "690dad4474beb3c7ee4df922"
              importDate: "2025-11-17"
              status: "confirmed"
              items:
                - ingredientId: "691ae1a9885a522575e5a0ad"
                  quantity: 10
                  importPrice: 5.5
                - ingredientId: "690dad4474beb3c7ee4df922"
                  quantity: 100
                  importPrice: 2.5
              taxRate: 5
              notes: "Hàng giao buổi sáng"

              

      responses:
        201:
          description: Import order created
          content:
            application/json:
              example:
                message: "Import order created successfully"

    get:
      tags:
        - Import Orders
      summary: Get list of import orders
      operationId: getImportOrders
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
            example: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
            example: 10
        - in: query
          name: search
          schema:
            type: string
            example: "B1WG"
        - in: query
          name: status
          schema:
            $ref: "#/components/schemas/ImportOrderStatus"
          example: confirmed
        - in: query
          name: supplierId
          schema:
            type: string
            example: "690dad4474beb3c7ee4df922"
        - in: query
          name: dateFrom
          schema:
            type: string
            format: date
            example: "2025-11-16"
        - in: query
          name: dateTo
          schema:
            type: string
            format: date
            example: "2025-11-20"

      responses:
        200:
          description: List of import orders
          content:
            application/json:
              example:
                message: "Import orders retrieved successfully"
                data:
                  importOrders:
                    - _id: "691b2f06c8ffd89b56cfa46e"
                      orderNumber: "PO-20251117-RCMN"
                      importDate: "2025-11-16T17:00:00.000Z"
                      status: "confirmed"
                      items:
                        - ingredientId: "691ae1a9885a522575e5a0ad"
                          ingredientName: "Thit bo"
                          quantity: 10
                          importPrice: 5.5
                          total: 55
                      subtotal: 55
                      taxRate: 5
                      taxAmount: 2.75
                      totalAmount: 57.75
                      supplierName: "Hieu Bui 234"
                      importedByName: "Gao red"
                  pagination:
                    currentPage: 1
                    limit: 10
                    total: 1
                    totalPages: 1
  /import-orders/{id}:
    get:
      tags:
        - Import Orders
      summary: Get import order detail
      operationId: getImportOrderDetail
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          example: "691b2ed8c8ffd89b56cfa46d"

      responses:
        200:
          description: Import order detail
          content:
            application/json:
              example:
                message: "Import order detail retrieved successfully"
                data:
                  _id: "691b2ed8c8ffd89b56cfa46d"
                  orderNumber: "PO-20251117-1I97"
                  importDate: "2025-11-16T17:00:00.000Z"
                  status: "confirmed"
                  items:
                    - ingredientId: "690dad4474beb3c7ee4df922"
                      ingredientName: "Gạo ST25"
                      quantity: 100
                      importPrice: 2.5
                      total: 250
                      unit: "kg"
                    - ingredientId: "691ae1a9885a522575e5a0ad"
                      ingredientName: "Thit bo"
                      quantity: 10
                      importPrice: 4.5
                      total: 45
                      unit: "kg"
                  subtotal: 295
                  taxRate: 5
                  taxAmount: 14.75
                  totalAmount: 309.75
                  notes: "Hàng giao buổi sáng"
                  importedByName: "Gao red"
                  supplierName: "Hieu Bui 234"


components:
  schemas:
    Table:
      type: object
      properties:
        _id:
          type: string
          description: ID duy nhất của bàn (MongoDB ObjectId)
          example: "6908bd8b93418ddd670d7098"
        number:
          type: integer
          description: Số thứ tự của bàn
          example: 1
        capacity:
          type: integer
          description: Sức chứa của bàn (số người)
          example: 10
        status:
          $ref: '#/components/schemas/TableStatus'
        currentOrderId:
          type: string
          nullable: true
          example: null
        QRcode:
          type: string
          description: Mã QR của bàn dưới dạng Data URL (base64)
          example: "data:image/png;base64,iVBORw0KGgo...[dữ liệu base64]..."
      # Các trường bắt buộc
      required:
        - _id
        - number
        - capacity
        - status
        - QRcode
    TableStatus:
      type: string
      description: Trạng thái của bàn ăn
      enum:
        - available
        - occupied
        - reserved
        - needs_cleaning
    UpdateTableRequest: 
      type: object
      description: Dữ liệu để cập nhật một bàn (chỉ chứa các trường có thể cập nhật)
      properties:
        capacity:
          type: integer
          description: Sức chứa mới của bàn
          example: 6
        status:
          $ref: '#/components/schemas/TableStatus'
    
    Supplier:
      type: object
      properties:
        _id:
          type: string
          description: ID duy nhất của nhà cung cấp (MongoDB ObjectId)
          example: "6912ac85d509c162b40b2e77"
        name:
          type: string
          description: Tên nhà cung cấp
          example: "Hong Hanh 2"
        taxCode:
          type: string
          description: Mã số thuế của nhà cung cấp
          example: "TX12345645"
        status:
          $ref: '#/components/schemas/SupplierStatus' # Giả định bạn có schema SupplierStatus
        contactPerson:
          type: string
          description: Tên người liên hệ
          example: "Hong Hanh"
        phone:
          type: string
          description: Số điện thoại liên hệ
          example: "+84901234567"
        email:
          type: string
          description: Địa chỉ email liên hệ
          example: "contact@honghanhtextile.com"
        address:
          type: string
          description: Địa chỉ của nhà cung cấp
          example: "123 Nguyen Trai Street, District 5, Ho Chi Minh City"
    CreateSupplierBody:
      type: object
      properties:
        name:
          type: string
          description: Tên nhà cung cấp
          example: "Hong Hanh 2"
        taxCode:
          type: string
          description: Mã số thuế
          example: "TX12345645"
        status:
          $ref: '#/components/schemas/SupplierStatus'
        contactPerson:
          type: string
          description: Tên người liên hệ
          example: "Hong Hanh"
        phone:
          type: string
          description: Số điện thoại liên hệ
          example: "+84901234567"
        email:
          type: string
          description: Địa chỉ email liên hệ
          example: "contact@honghanhtextile.com"
        address:
          type: string
          description: Địa chỉ của nhà cung cấp
          example: "123 Nguyen Trai Street, District 5, Ho Chi Minh City"
      required: # Dựa trên JSON, có vẻ tất cả đều bắt buộc
        - name
        - taxCode
        - status
        - contactPerson
        - phone
        - email
        - address
    UpdateSupplierBody:
      type: object
      properties:
        name:
          type: string
          description: Tên nhà cung cấp mới
          example: "Hong Hanh 2"
        taxCode:
          type: string
          description: Mã số thuế mới
          example: "TX12345645"
        status:
          $ref: '#/components/schemas/SupplierStatus'
        contactPerson:
          type: string
          description: Tên người liên hệ mới
          example: "Hong Hanh"
        phone:
          type: string
          description: Số điện thoại liên hệ mới
          example: "+84901234567"
        email:
          type: string
          description: Địa chỉ email liên hệ mới
          example: "contact@honghanhtextile.com"
        address:
          type: string
          description: Địa chỉ của nhà cung cấp mới
          example: "123 Nguyen Trai Street, District 5, Ho Chi Minh City"
    SupplierStatus:
      type: string
      description: Trạng thái của nhà cung cấp
      enum:
        - active
        - inactive
    
    Permission: 
      type: object
      properties:
        _id:
          type: string
          description: ID duy nhất của quyền (MongoDB ObjectId)
          example: "691a9e5c7800bd3806be2592"
        name:
          type: string
          description: Tên của quyền hạn (API endpoint hoặc action)
          example: create_table
        description:
          type: string
          description: Mô tả chi tiết về chức năng của quyền này
          example: Tạo mới một bàn
        module:
          type: string
          description: Tên module mà quyền này thuộc về 
          example: table
    createPermissionReqBody:
      type: object
      properties:
        name:
          type: string
          description: Tên quyền
          example: create_table
        description:
          type: string
          description: Mô tả quyền
          example: Tạo một bàn ăn mới
        module:
          type: string
          example: table
      required:
        - name
    UpdatePermissionReqBody:
      type: object
      properties:
        name:
          type: string
          example: create_table
        description:
          type: string
          example: Create a new table in the restaurant.
        module:
          type: string
          example: table
  
    CreateRoleReqBody:
      type: object
      required:
        - name
        - status
        - permissionIds
      properties:
        name:
          type: string
          example: Employee 1
        description:
          type: string
          example: ""
        status: 
          $ref: "#/components/schemas/RoleStatus"
        permissionIds:
          type: array
          items:
            type: string
          example: ["6915915c7d31b24b66fd0c13","6915917c7d31b24b66fd0c15"]
    Role:
      type: object
      properties:
        _id:
          type: string
          example: 691aa3757800bd3806be2595
        name:
          type: string
          example: Employee 1
        description:
          type: string
          example: ""
        status:
          $ref: "#/components/schemas/RoleStatus"
        permissionIds:
          type: array
          items:
            type: string
          example: ["6915915c7d31b24b66fd0c13","6915917c7d31b24b66fd0c15"]  
    RoleStatus:
      type: string
      description: Trạng thái của Role
      enum:
        - active
        - inactive
      example: active

    RoleWithPermissions:
      type: object
      properties:
        _id:
          type: string
          example: 6911a5cbd2c16ce645a813a0
        name:
          type: string
          example: Admin
        description:
          type: string
          example: Admin's permissions
        status:
          $ref: "#/components/schemas/RoleStatus"
        permissions:
          type: array
          items:
            $ref: "#/components/schemas/Permission"
    UpdateRoleReqBody:
      type: object
      properties:
        name:
          type: string
          example: Admin
        description:
          type: string
          example: Admin's permissions
        status:
          $ref: "#/components/schemas/RoleStatus"
        permissionIds:
          type: array
          items:
            type: string
          example: [
            "6915919f7d31b24b66fd0c17",
            "6915915c7d31b24b66fd0c13",
            "6915917c7d31b24b66fd0c15"
          ]
    
    ImportOrderStatus:
      type: string
      enum:
        - draft
        - confirmed
    ImportOrderItem:
      type: object
      properties:
        ingredientId:
          type: string
        ingredientName:
          type: string
        quantity:
          type: number
        importPrice:
          type: number
        total:
          type: number
    ImportOrder:
      type: object
      properties:
        _id:
          type: string
        orderNumber:
          type: string
        supplierId:
          type: string
        importedById:
          type: string
        importDate:
          type: string
          format: date-time
        status:
          $ref: "#/components/schemas/ImportOrderStatus"
        items:
          type: array
          items:
            $ref: "#/components/schemas/ImportOrderItem"
        subtotal:
          type: number
        taxRate:
          type: number
        taxAmount:
          type: number
        totalAmount:
          type: number
        notes:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    ImportOrderListItem:
      type: object
      properties:
        orderNumber:
          type: string
        importDate:
          type: string
          format: date-time
        status:
          type: string
        totalAmount:
          type: number
        supplierName:
          type: string
        importedByName:
          type: string
    ImportOrderDetail:
      allOf:
        - $ref: "#/components/schemas/ImportOrder"
        - type: object
          properties:
            supplierName:
              type: string
            importedByName:
              type: string
            items:
              type: array
              items:
                type: object
                properties:
                  ingredientId:
                    type: string
                  ingredientName:
                    type: string
                  unit:
                    type: string
                  quantity:
                    type: number
                  importPrice:
                    type: number
                  total:
                    type: number
    CreateImportOrderReqBody:
      type: object
      required:
        - supplierId
        - importDate
        - status
        - items
      properties:
        supplierId:
          type: string
        importDate:
          type: string
          format: date
        taxRate:
          type: number
          default: 0
        notes:
          type: string
        status:
          $ref: "#/components/schemas/ImportOrderStatus"
        items:
          type: array
          items:
            type: object
            required:
              - ingredientId
              - quantity
              - importPrice
            properties:
              ingredientId:
                type: string
              quantity:
                type: number
              importPrice:
                type: number
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT