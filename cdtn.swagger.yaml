openapi: 3.0.4
info:
  title: Chuy√™n ƒë·ªÅ t·ªët nghi·ªáp qu·∫£n l√≠ qu√°n ƒÉn
  description: |-
    ## üîå H∆∞·ªõng d·∫´n t√≠ch h·ª£p Socket.IO (Real-time)
    
    H·ªá th·ªëng s·ª≠ d·ª•ng c∆° ch·∫ø Hybrid: **HTTP** ƒë·ªÉ thao t√°c d·ªØ li·ªáu v√† **Socket.IO** ƒë·ªÉ nh·∫≠n th√¥ng b√°o th·ªùi gian th·ª±c.
    
    ### 1. K·∫øt n·ªëi (Chung)
    * **URL**: `ws://domain.com` (ho·∫∑c `http://localhost:3000`)
    * **Auth**: G·ª≠i Token qua `headers`.
    ```javascript
    const socket = io("http://localhost:3000", {
      headers: { authorization: "Bearer <ACCESS_TOKEN>" }
    });
    ```
    
    ### 2. Lu·ªìng Kh√°ch H√†ng (Guest)
    D√†nh cho m√†n h√¨nh ƒë·∫∑t m√≥n t·∫°i b√†n.
    * **S·ª± ki·ªán G·ª≠i ƒëi (Emit)**: 
      * `join_table`: G·ª≠i ngay sau khi connect. Data: `{ tableId: "..." }`.
    * **S·ª± ki·ªán L·∫Øng nghe (On)**:
      * `refresh_order`: Nh·∫≠n khi c√≥ ƒë∆°n m·ªõi ho·∫∑c c·∫≠p nh·∫≠t ƒë∆°n (ƒë·ªÉ reload list bill).
        data `
          {
            "type": "ORDER_UPDATED",
            "message": "Kh√°ch h√†ng v·ª´a g·ªçi m√≥n m·ªõi",
            "data": {
                "_id": "693f7a63e7455fa6893e7080",
                "tableId": "6937e6e480646d49c4d56e9d",
                "tableNumber": 2,
                "items": [
                    {
                        "_id": "693f7a63e7455fa6893e7081",
                        "dishId": "692fe855d1d14ce2ee11a96e",
                        "dishName": "C√°nh g√† BBQ (4 mi·∫øng)",
                        "dishPrice": 89000,
                        "dishImage": "https://res.cloudinary.com/dpmbhsbcg/image/upload/v1764747348/restaurant-app/img_1764747346505.jpg",
                        "quantity": 2,
                        "note": "Kh√¥ng l·∫•y t∆∞∆°ng ·ªõt",
                        "orderedBy": "Minh Nguyen",
                        "status": "Pending",
                        "createdAt": "2025-12-15T03:02:59.341Z",
                        "managedBy": "",
                        "processingHistory": []
                    },
                    {
                        "_id": "693f7a63e7455fa6893e7082",
                        "dishId": "692feb30d1d14ce2ee11a974",
                        "dishName": "Coca cola",
                        "dishPrice": 30000,
                        "dishImage": "https://res.cloudinary.com/dpmbhsbcg/image/upload/v1764748078/restaurant-app/img_1764748078007.jpg",
                        "quantity": 1,
                        "note": "",
                        "orderedBy": "Minh Nguyen",
                        "status": "Pending",
                        "createdAt": "2025-12-15T03:02:59.341Z",
                        "managedBy": "",
                        "processingHistory": []
                    }
                ],
                "totalAmount": 208000,
                "status": "Pending",
                "createdAt": "2025-12-15T03:02:59.612Z",
                "paymentStatus": "Unpaid",
                "paymentMethod": "Cash",
                "updatedAt": "2025-12-15T03:02:59.612Z"
            }
          }`
      * `update_order_item`: Nh·∫≠n khi B·∫øp chuy·ªÉn tr·∫°ng th√°i t·ª´ng m√≥n (v√≠ d·ª•: ƒêang n·∫•u).
        Data 
          `
            {
              "orderId": "693f7a63e7455fa6893e7080",
              "itemId": "693f7a63e7455fa6893e7081",
              "status": "Cooking",
              "mamageBy": "Van Thu",
              "message": "M√≥n C√°nh g√† BBQ (4 mi·∫øng) (SL: 2) c·ªßa Minh Nguyen ƒë√£ chuy·ªÉn sang: ƒêang n·∫•u"
            }
          `
      * `payment_success`: Nh·∫≠n v·ªÅ khi kh√°ch h√†ng thanh to√°n th√†nh c√¥ng
        Data
        `
        {
            "orderId": "693f7a63e7455fa6893e7080",
            "amount": 266000,
            "message": "Thanh to√°n th√†nh c√¥ng!"
        }
        `
    ### 3. Lu·ªìng Qu·∫£n Tr·ªã / B·∫øp (Admin)
    D√†nh cho m√†n h√¨nh Dashboard, B·∫øp, Thu ng√¢n.
    * **S·ª± ki·ªán G·ª≠i ƒëi (Emit)**:
      * `join_kitchen_room`: G·ª≠i ngay sau khi connect. 
        * **Y√™u c·∫ßu**: Token c·ªßa User ph·∫£i c√≥ quy·ªÅn `socket_join_kitchen` (Admin m·∫∑c ƒë·ªãnh c√≥).
        * **Data**: Kh√¥ng c·∫ßn g·ª≠i tham s·ªë.
    * **S·ª± ki·ªán L·∫Øng nghe (On)**:
      * `join_success`: Nh·∫≠n ph·∫£n h·ªìi x√°c nh·∫≠n ƒë√£ v√†o ph√≤ng th√†nh c√¥ng.
          Data 
          `
            { message: "B·∫°n ƒë√£ v√†o ph√≤ng b·∫øp", roomId: "admin_room" }
          `
      * `new_order`: Nh·∫≠n th√¥ng b√°o khi Kh√°ch v·ª´a t·∫°o ƒë∆°n m·ªõi (Ting ting!).
        * **Data**: `{
          "type": "NEW_ORDER_CREATED",
          "message": "B√†n 2 v·ª´a ƒë·∫∑t m√≥n",
          "data": {
              "_id": "693f7a63e7455fa6893e7080",
              "tableId": "6937e6e480646d49c4d56e9d",
              "tableNumber": 2,
              "items": [
                  {
                      "_id": "693f7a63e7455fa6893e7081",
                      "dishId": "692fe855d1d14ce2ee11a96e",
                      "dishName": "C√°nh g√† BBQ (4 mi·∫øng)",
                      "dishPrice": 89000,
                      "dishImage": "https://res.cloudinary.com/dpmbhsbcg/image/upload/v1764747348/restaurant-app/img_1764747346505.jpg",
                      "quantity": 2,
                      "note": "Kh√¥ng l·∫•y t∆∞∆°ng ·ªõt",
                      "orderedBy": "Minh Nguyen",
                      "status": "Pending",
                      "createdAt": "2025-12-15T03:02:59.341Z",
                      "managedBy": "",
                      "processingHistory": []
                  },
                  {
                      "_id": "693f7a63e7455fa6893e7082",
                      "dishId": "692feb30d1d14ce2ee11a974",
                      "dishName": "Coca cola",
                      "dishPrice": 30000,
                      "dishImage": "https://res.cloudinary.com/dpmbhsbcg/image/upload/v1764748078/restaurant-app/img_1764748078007.jpg",
                      "quantity": 1,
                      "note": "",
                      "orderedBy": "Minh Nguyen",
                      "status": "Pending",
                      "createdAt": "2025-12-15T03:02:59.341Z",
                      "managedBy": "",
                      "processingHistory": []
                  }
              ],
              "totalAmount": 208000,
              "status": "Pending",
              "createdAt": "2025-12-15T03:02:59.612Z",
              "paymentStatus": "Unpaid",
              "paymentMethod": "Cash",
              "updatedAt": "2025-12-15T03:02:59.612Z"
          }
        }`.
      * `update_order_item`: Nh·∫≠n th√¥ng b√°o khi m·ªôt Admin kh√°c v·ª´a c·∫≠p nh·∫≠t tr·∫°ng th√°i m√≥n (ƒë·ªÉ ƒë·ªìng b·ªô giao di·ªán gi·ªØa c√°c m√°y Admin).
        Data 
        `
          {
            "orderId": "693f7a63e7455fa6893e7080",
            "itemId": "693f7a63e7455fa6893e7081",
            "status": "Cooking",
            "mamageBy": "Van Thu",
            "message": "M√≥n C√°nh g√† BBQ (4 mi·∫øng) (SL: 2) c·ªßa Minh Nguyen ƒë√£ chuy·ªÉn sang: ƒêang n·∫•u"
          }
        `
      
      * `payment_received`: Nh·∫≠n khi kh√°ch thanh to√°n th√†nh c√¥ng
        Data 
          `
          {
              "orderId": "693f7a63e7455fa6893e7080",
              "tableNumber": 2,
              "amount": 266000,
              "message": "B√†n 2 v·ª´a thanh to√°n 266,000ƒë"
          }
          `
  termsOfService: https://swagger.io/terms/
  contact:
    email: apiteam@swagger.io
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  version: 1.0.12
externalDocs:
  description: Find out more about Swagger
  url: https://swagger.io
servers:
  - url: https://cdtn-be-one.vercel.app/admin
  - url: https://cdtn-be-one.vercel.app/guest
  - url: http://localhost:3000/admin
  - url: http://localhost:3000/guest
tags:
  - name: Account
    description: C√°c logic li√™n quan ƒë·∫øn account
  - name: Table
    description: C√°c logic li√™n quan ƒë·∫øn table
  - name: Supplier
    description: C√°c logic li√™n quan ƒë·∫øn supplier
  - name: Permission
    description: C√°c logic li√™n quan ƒë·∫øn Permission
  - name: Role
    description: C√°c logic li√™n quan ƒë·∫øn Role
  - name: Ingredient
    description: C√°c logic li√™n quan ƒë·∫øn Ingredient
  - name: Import Orders
    description: C√°c logic li√™n quan ƒë·∫øn Import Orders
  - name: Category Ingredient
    description: C√°c logic li√™n quan ƒë·∫øn Category Ingredient
  - name: Dishes
    description: C√°c logic li√™n quan ƒë·∫øn Dishes
  - name: Dish Category
    description: C√°c logic li√™n quan ƒë·∫øn Dish Category
  - name: Orders
    description: Qu·∫£n l√Ω ƒë∆°n h√†ng (Admin)
  - name: Admin Reviews
    description: Qu·∫£n l√Ω ƒë√°nh gi√° (Admin)

  - name: Guest Auth
    description: ƒêƒÉng nh·∫≠p b√™n kh√°ch h√†ng
  - name: Guest 
    description: Logic b√™n kh√°ch h√†ng
  - name: Guest Reviews
    description: API ƒë√°nh gi√° cho kh√°ch h√†ng
  
  
    

paths:
  /accounts/login:
    post:
      tags:
        - Account
      summary: ƒêƒÉng nh·∫≠p
      description: ƒêƒÉng nh·∫≠p
      operationId: login
      requestBody:
        description: Th√¥ng tin ƒëƒÉng nh·∫≠p
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: admin1@gmail.com
                password:
                  type: string
                  example: MinhOkela123#@
        required: true
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: 
                    type: string
                    example: "Login successful"
                  result: 
                    type: object
                    example:
                      accesss_token:
                        type: string
                        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkwMzY4ZWYxODkwZmU1YWFmYzIyYmYxIiwidG9rZW5fdHlwZSI6MCwidmVyaWZ5IjoxLCJyb2xlIjoxLCJpYXQiOjE3NjI2OTg4ODIsImV4cCI6MTc2MjY5OTE4Mn0.m5OrlzFwQSW96FQhLA3cFegikk8rsSJHqxoJQZsLXCo
                      refresh_token: 
                        type: string
                        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkwMzY4ZWYxODkwZmU1YWFmYzIyYmYxIiwidG9rZW5fdHlwZSI6MSwidmVyaWZ5IjoxLCJyb2xlIjoxLCJpYXQiOjE3NjI2OTg4ODIsImV4cCI6MTc3MTMzODg4Mn0.P7nCfb5bxmKxkI4Hn8YJzHLyMiZ0NEP_bGFw3tEoJqk
        '400':
          description: Email or password is incorrect
        '422':
          description: Validation error
  /accounts/refresh-token:
    post:
      tags:
        - Account
      summary: Refresh access token
      operationId: accountsRefreshToken
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                refresh_token:
                  type: string
              required:
                - refresh_token
            example:
              refresh_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
      responses:
        200:
          description: Refresh token success
          content:
            application/json:
              example:
                message: "Refresh token success"
                result:
                  access_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkxNmUyNTA5OGQ5YzViYjk1ZDI2ZTBiIiwidG9rZW5fdHlwZSI6ImFjY2Vzc190b2tlbiIsInZlcmlmeSI6InZlcmlmaWVkIiwicm9sZV9uYW1lIjoiQWRtaW4iLCJwZXJtaXNzaW9ucyI6WyJ2aWV3X29yZGVycyIsInVwZGF0ZV9pbmdyZWRpZW50IiwiZGVsZXRlX2luZ3JlZGllbnQiLCJ2aWV3X2Rhc2hib2FyZCIsInZpZXdfc3VwcGxpZXJzIiwiZGVsZXRlX2Rpc2giLCJ1cGRhdGVfcm9sZSIsInZpZXdfaW5ncmVkaWVudHMiLCJjcmVhdGVfdGFibGUiLCJjcmVhdGVfaW5ncmVkaWVudCIsInZpZXdfdGFibGVzIiwiZGVsZXRlX3JvbGUiLCJ2aWV3X2Rpc2hfY2F0ZWdvcnlfbGlzdCIsInZpZXdfaW1wb3J0X29yZGVyX2xpc3QiLCJkZWxldGVfZGlzaF9jYXRlZ29yeSIsImNyZWF0ZV9pbmdyZWRpZW50X2NhdGVnb3J5IiwidXBkYXRlX2Rpc2hfY2F0ZWdvcnkiLCJ2aWV3X2luZ3JlZGllbnRfY2F0ZWdvcnlfbGlzdCIsInVwZGF0ZV9kaXNoIiwiY3JlYXRlX3JvbGUiLCJ1cGRhdGVfaW5ncmVkaWVudF9jYXRlZ29yeSIsImNyZWF0ZV9kaXNoIiwiZGVsZXRlX2luZ3JlZGllbnRfY2F0ZWdvcnkiLCJ2aWV3X2Rpc2hlcyIsInZpZXdfaW1wb3J0X29yZGVyX2RldGFpbCIsImRlbGV0ZV9hY2NvdW50Iiwidmlld19yb2xlcyIsInJlZ2VuZXJhdGVfdGFibGVfcXIiLCJ2aWV3X2FjY291bnRzIiwiY3JlYXRlX2Rpc2hfY2F0ZWdvcnkiLCJjcmVhdGVfYWNjb3VudCIsImRlbGV0ZV90YWJsZSIsInVwZGF0ZV9hY2NvdW50IiwiY3JlYXRlX2ltcG9ydF9vcmRlciIsInVwZGF0ZV90YWJsZSIsImNhbmNlbF9vcmRlciIsImNyZWF0ZV9zdXBwbGllciIsInVwZGF0ZV9vcmRlcl9zdGF0dXMiLCJ1cGRhdGVfc3VwcGxpZXIiLCJkZWxldGVfc3VwcGxpZXIiXSwiaWF0IjoxNzYzNTI4OTA2LCJleHAiOjE3NjM1Mjk4MDZ9.wwMR3IXblT0CBobLb3uZXdZn_uObX1On4QpXuMRgO1Y"
                  refresh_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkxNmUyNTA5OGQ5YzViYjk1ZDI2ZTBiIiwidG9rZW5fdHlwZSI6InJlZnJlc2hfdG9rZW4iLCJ2ZXJpZnkiOiJ2ZXJpZmllZCIsImlhdCI6MTc2MzUyODkwNiwiZXhwIjoxNzcyMTY4OTA2fQ.ZMsNR8ZEBRgSlFypHWxh2RaPx5KyaoK5n6MnPoUSYPw"
        401:
          description: Invalid token
          content:
            application/json:
              example:
                message: "Invalid token"
  /accounts/register:
    post:
      tags:
        - Account
      summary: Register a new user
      operationId: accountsRegister
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
                phone:
                  type: string
                date_of_birth:
                  type: string
                  format: date-time
                role_id:
                  type: string
              required:
                - name
                - email
                - date_of_birth
                - role_id
            example:
              name: "Gao red 2"
              email: "svhn1@luxsev.com"
              phone: "0325793630"
              date_of_birth: "1999-01-20T00:00:00Z"
              role_id: "691a9a6f7800bd3806be258e"

      responses:
        200:
          description: Registration successful
          content:
            application/json:
              example:
                message: "Registration successful. Please check your email to verify your account."

        409:
          description: Email already exists
          content:
            application/json:
              example:
                message: "This email already exists"

        422:
          description: Validation error
          content:
            application/json:
              example:
                message: "Validation error"
  /accounts/logout:
    post:
      tags:
        - Account
      summary: Logout user
      operationId: accountsLogout
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                refresh_token:
                  type: string
              required:
                - refresh_token
            example:
              refresh_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
      responses:
        200:
          description: Logout successfully
          content:
            application/json:
              example:
                message: "Logout successfully"
        401:
          description: Used refresh token or not exist
          content:
            application/json:
              example:
                message: "Used refresh token or not exist"
  /accounts/verify-email:
    post:
      tags:
        - Account
      summary: Verify user email
      operationId: verifyEmail
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email_verify_token:
                  type: string
              required:
                - email_verify_token
            example:
              email_verify_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
      responses:
        200:
          description: Email verification successful
          content:
            application/json:
              example:
                message: "Your account has been successfully verified. Please check your email to receive the password."
                code: "VERIFY_SUCCESS"
        401:
          description: Unauthorized - Token invalid or expired
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Invalid token
                  code:
                    type: string
                    example: INVALID_TOKEN
              examples:
                InvalidToken:
                  summary: Invalid token
                  value:
                    message: Invalid token
                    code: INVALID_TOKEN
                TokenExpired:
                  summary: Token expired
                  value:
                    message: Token expired, please resend
                    code: EMAIL_TOKEN_EXPIRED
  /accounts/resend-verify-email:
    post:
      tags:
        - Account
      summary: G·ª≠i l·∫°i email x√°c th·ª±c (Resend Verify Email)
      description: API n√†y s·ª≠ d·ª•ng ƒë·ªÉ g·ª≠i l·∫°i email x√°c th·ª±c d·ª±a tr√™n token ƒë∆∞·ª£c cung c·∫•p.
      operationId: resendVerifyEmail
      requestBody:
        description: Th√¥ng tin c·∫ßn thi·∫øt ƒë·ªÉ g·ª≠i l·∫°i email x√°c th·ª±c
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email_verify_token:
                  type: string
                  description: Chu·ªói token x√°c th·ª±c email (JWT). (Duy nh√¢t ·ªü ƒë√¢y khong check h·∫°n c·ªßa token)
                  example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              required:
                - email_verify_token
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
              examples:
                Success: # Tr∆∞·ªùng h·ª£p m·ªõi (H√¨nh n√†y)
                  summary: G·ª≠i l·∫°i email th√†nh c√¥ng
                  value:
                    message: "A new verification email has been sent. Please check your inbox."
                    code: "RESEND_VERIFY_EMAIL_SUCCESS"
                AlreadyVerified: # Tr∆∞·ªùng h·ª£p c≈© (H√¨nh tr∆∞·ªõc)
                  summary: Email ƒë√£ ƒë∆∞·ª£c x√°c th·ª±c tr∆∞·ªõc ƒë√≥
                  value:
                    message: "This email has already been verified."
                    code: "EMAIL_ALREADY_VERIFIED"
        '401':
          description: L·ªói x√°c th·ª±c (Token kh√¥ng h·ª£p l·ªá ho·∫∑c ƒë√£ h·∫øt h·∫°n).
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid token"
                  code:
                    type: string
                    example: "INVALID_TOKEN"
  /accounts/forgot-password:
    post:
      operationId: accountsForgotPassword
      tags:
        - Account
      summary: Send password reset instructions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
              required:
                - email
            example:
              email: svhn1@luxsev.com
      responses:
        200:
          description: Password reset instructions sent
          content:
            application/json:
              example:
                message: "We have sent instructions to reset your password. Please check your inbox (and spam folder) to complete the process."
        422:
          description: Validation error
  /accounts/verify-forgot-password:
    post:
      operationId: accountsVerifyForgotPassword
      tags:
        - Account
      summary: Verify forgot password token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                forgot_password_token:
                  type: string
              required:
                - forgot_password_token
            example:
              forgot_password_token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkxNmUyNTA5OGQ5YzViYjk1ZDI2ZTBiIiwiVG9rZW5UeXBlIjoiZm9yZ290X3Bhc3N3b3JkX3Rva2VuIiwidmVyaWZ5IjoidmVyaWZpZWQiLCJpYXQiOjE3NjM1MzAwMzksImV4cCI6MTc2NDEzNDgzOX0.f9Jx38ee-Y7KlnT3a9fC0fqye_rOVktMy1QRBskwvTE"
      responses:
        200:
          description: Verify forgot password token success
          content:
            application/json:
              example:
                message: "Verify forgot password token success"
        400:
          description: Forgot password token is required
          content:
            application/json:
              example:
                message: "Forgot password token is required."
        401:
          description: Unauthorized (L·ªói x√°c th·ª±c token)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
              examples:
                TokenExpired: # Tr∆∞·ªùng h·ª£p m·ªõi (H√¨nh n√†y)
                  summary: Token ƒë√£ h·∫øt h·∫°n
                  value:
                    message: "Reset password token has expired. Please request a new one."
                    code: "FORGOT_PASSWORD_TOKEN_EXPIRED"
                InvalidSignature: # Tr∆∞·ªùng h·ª£p c≈© (H√¨nh tr∆∞·ªõc)
                  summary: Token kh√¥ng h·ª£p l·ªá / Ch·ªØ k√Ω sai
                  value:
                    message: "Invalid signature"
                    code: "FORGOT_PASSWORD_TOKEN_INVALID"
  /accounts/reset-password:
    post:
      operationId: accountsResetPassword
      tags:
        - Account
      summary: Reset user password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                forgot_password_token:
                  type: string
                password:
                  type: string
                confirm_password:
                  type: string
              required:
                - forgot_password_token
                - password
                - confirm_password
            example:
              forgot_password_token: "yJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjkxMmFmMmU5YjJmYjFiYWIxM2QxODU4IiwiVG9rZW5UeXBlIjoiZm9yZ290X3Bhc3N3b3JkX3Rva2VuIiwidmVyaWZ5IjoidmVyaWZpZWQiLCJpYXQiOjE3NjI4MzMxMTAsImV4cCI6MTc2MzQzNzkxMH0.38A8s9fITIRbYUgk5we18NY75T4STZ6e84PBW6azsW0"
              password: "Minhnguyen123@"
              confirm_password: "Minhnguyen123@"
      responses:
        200:
          description: Password reset successfully
          content:
            application/json:
              example:
                message: "Your password has been reset successfully. You can now login with your new password."
        400:
          description: Forgot password token is required
          content:
            application/json:
              example:
                message: "Forgot password token is required."
        401:
          description: Unauthorized (L·ªói x√°c th·ª±c token)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  code:
                    type: string
              examples:
                TokenExpired: # Tr∆∞·ªùng h·ª£p m·ªõi (H√¨nh n√†y)
                  summary: Token ƒë√£ h·∫øt h·∫°n
                  value:
                    message: "Reset password token has expired. Please request a new one."
                    code: "FORGOT_PASSWORD_TOKEN_EXPIRED"
                InvalidSignature: # Tr∆∞·ªùng h·ª£p c≈© (H√¨nh tr∆∞·ªõc)
                  summary: Token kh√¥ng h·ª£p l·ªá / Ch·ªØ k√Ω sai
                  value:
                    message: "Invalid signature"
                    code: "FORGOT_PASSWORD_TOKEN_INVALID"
        422:
          description: Validation error
          content:
            application/json:
              example:
                message: "Validation error"
  /accounts/me:
    get:
      operationId: accountsGetMe
      tags:
        - Account
      summary: Get current user profile
      security:
        - BearerAuth: []
      responses:
        200:
          description: Get my profile success
          content:
            application/json:
              example:
                message: "Get my profile success"
                result:
                  _id: "6916e25098d9c5bb95d26e0b"
                  name: "AKA Bui Hieu"
                  email: "admin1@gmail.com"
                  date_of_birth: "2025-11-16T14:26:24.000Z"
                  avatar: ""
                  role_name: "Admin"
        401:
          description: Access token is required
          content:
            application/json:
              example:
                message: "Access token is required"
    patch:
      operationId: accountsUpdateMe
      tags:
        - Account
      summary: Update my profile
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                date_of_birth:
                  type: string
                  format: date-time
                phone:
                  type: string
              example:
                name: "Ben Hiu"
                date_of_birth: "1994-10-20T00:00:00Z"
                phone: "0357371955"
      responses:
        200:
          description: Update infor success
          content:
            application/json:
              example:
                message: "Update infor success"
                result:
                  _id: "6916e25098d9c5bb95d26e0b"
                  name: "Ben Hiu"
                  date_of_birth: "1994-10-20T00:00:00.000Z"
                  phone: "0357371955"
        401:
          description: Invalid signature
          content:
            application/json:
              example:
                message: "Invalid signature"
        422:
          description: Validation error
  /accounts/change-password:
    post:
      operationId: accountsChangePassword
      tags:
        - Account
      summary: Change user password
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                old_password:
                  type: string
                password:
                  type: string
                confirm_password:
                  type: string
              required:
                - old_password
                - password
                - confirm_password
            example:
              old_password: "MinhNguyen123@"
              password: "MinhOkela123#@1"
              confirm_password: "MinhOkela123#@1"
      responses:
        200:
          description: Password changed successfully
          content:
            application/json:
              example:
                message: "Your password has been changed successfully."
        401:
          description: Old password is not correct
          content:
            application/json:
              example:
                message: "Your old password is not correct."
        422:
          description: Validation error
          content:
            application/json:
              example:
                message: "Validation error"
  /accounts:
    get:
      operationId: accountsGetList
      tags:
        - Account
      summary: Get list of accounts with pagination and filters
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: Number of items per page
        - in: query
          name: search
          schema:
            type: string
          description: Search by name or email
        - in: query
          name: roleId
          schema:
            type: string
          description: Filter by role ID
      responses:
        200:
          description: Get list of accounts successfully
          content:
            application/json:
              example:
                message: "Get list of accounts successfully"
                result:
                  accounts:
                    - _id: "691d4ed71b4f49cdadc0dc06"
                      name: "Gao red 2"
                      email: "nhanvien2+3@gmail.com"
                      date_of_birth: "1999-01-20T00:00:00.000Z"
                      avatar: ""
                      role_name: "Employee"
                    - _id: "691c91d732db64f4a94babf9"
                      name: "Gao red 2"
                      email: "nhanvien2+2@gmail.com"
                      date_of_birth: "1999-01-20T00:00:00.000Z"
                      avatar: ""
                      role_name: "Employee"
                    - _id: "691c8fa12d5a0b22275915d1"
                      name: "Gao red 2"
                      email: "nhanvien2+1@gmail.com"
                      date_of_birth: "1999-01-20T00:00:00.000Z"
                      avatar: ""
                      role_name: "Employee"
                    - _id: "691c89dff02889e3344bb0ea"
                      name: "Gao red 2"
                      email: "nhanvien2@gmail.com"
                      date_of_birth: "1999-01-20T00:00:00.000Z"
                      avatar: ""
                      role_name: "Employee"
                    - _id: "691a9abf7800bd3806be258f"
                      name: "Gao red"
                      email: "nhanvien1@gmail.com"
                      date_of_birth: "1999-01-20T00:00:00.000Z"
                      avatar: ""
                      role_name: "Employee"
                    - _id: "6916e25098d9c5bb95d26e0b"
                      name: "AKA Bui Hieu"
                      email: "admin1@gmail.com"
                      date_of_birth: "2025-11-16T14:26:24.000Z"
                      avatar: ""
                      role_name: "Admin"
                  pagination:
                    currentPage: 1
                    limit: 10
                    total: 6
                    totalPages: 1
        401:
          description: Invalid signature
          content:
            application/json:
              example:
                message: "Invalid signature"
  /accounts/me/avatar:
    patch:
      operationId: updateAvatar
      tags:
        - Account
      summary: Upload avatar
      description: Update avatar using multipart/form-data
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
              required:
                - image
            example:
              image: (binary)
      responses:
        200:
          description: Avatar updated successfully
          content:
            application/json:
              example:
                message: "Avatar updated successfully"
                result:
                  avatar: "https://res.cloudinary.com/dpmbhsbcg/image/upload/v1763567455/restaurant-app/img_1763567454472.jpg"
        400:
          description: No image uploaded
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: No image uploaded
        401:
          description: Invalid signature
          content:
            application/json:
              example:
                message: "Invalid signature"
  /accounts/{id}:
    patch:
      tags:
        - Account 
      summary: Update an account (Admin only)
      description: Admin can update account's status or role.
      operationId: updateAccount
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Account ID (MongoDB ObjectId)

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  description: Account status
                  example: active
                role_id:
                  type: string
                  description: New role ID
                  example: "6912ad761ef6eba42b035370"

      responses:
        200:
          description: Account updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Account updated successfully
        403:
          description: Forbidden ‚Äì User does not have permission
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Forbidden
        404:
          description: Role not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Role not found

  /tables:
    post:
        tags:
          - Table
        summary: T·∫°o m·ªõi tables
        description: T·∫°o m·ªõi tables
        operationId: createTable
        requestBody:
          description: Th√¥ng tin t·∫°o m·ªõi table
          content:
            application/json:
              schema:
                type: object
                properties:
                  capacity:
                    type: number
                    example: 8
          required: true
        security:
          - BearerAuth: []
        responses:
          '200':
            description: successful operation
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    message: 
                      type: string
                      example: Table created successfully.
                    result: 
                      type: object
                      example:
                        QRcode:
                          type: string
                          example: "data:image/png;base64,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"
                        table: 
                          type: object
                          properties:
                            id:
                              type: string
                              format: MongoId
                              example: 69114df7111e533f4e76600e
                            number:
                              type: integer
                              example: 9
                            capacity:
                              type: integer
                              example: 12
                            status:
                              type: integer
                              example: 0
                            currentOrderId:
                              type: string
                              nullable: true
                              example: null
                            createdAt:
                              type: string
                              format: date-time
                              example: 2025-11-10T02:29:11.676Z
                            updatedAt:
                              type: string
                              format: date-time
                              example: 2025-11-10T02:29:11.676Z
          '401':
            description: Access token is required
          '422':
            description: Validation error
    get:
      tags:
        - Table
      summary: L·∫•y danh s√°ch b√†n
      description: L·∫•y danh s√°ch b√†n bao g·ªìm ph√¢n trang v√† l·ªçc theo tr·∫°ng th√°i (S·ª≠ d·ª•ng 0, 1, 2, 3 t∆∞∆°ng ·ª©ng v·ªõi Available, Occupied, Reserved, Needs_cleaning)
      operationId: getAllTable
      parameters:
        - name: page
          in: query
          description: Ph√¢n trang
          required: false
          schema:
            type: string
        - name: status
          in: query
          description: T√¨m ki·∫øm theo tr·∫°ng th√°i b√†n
          required: false
          schema:
            type: number

      security:
        - BearerAuth: []
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: 
                    type: string
                    example: "Get all tables successfully."
                  tables: 
                    type: array
                    description: Danh s√°ch c√°c b√†n
                    items:
                      $ref: '#/components/schemas/Table'
                  currentPage:
                    type: integer
                    description: Trang hi·ªán t·∫°i
                    example: 1
                  limit:
                    type: integer
                    description: S·ªë l∆∞·ª£ng b√†n tr√™n m·ªói trang
                    example: 4
                  skip:
                    type: integer
                    description: S·ªë l∆∞·ª£ng b√†n ƒë√£ b·ªè qua
                    example: 0
                  totalPage:
                    type: integer
                    description: T·ªïng s·ªë trang
                    example: 3
        '401':
          description: Access token is required
        '422':
          description: Validation error
  /tables/{id}:
    patch:
      tags:
        - Table
      summary: C·∫≠p nh·∫≠t th√¥ng tin b√†n
      description: C·∫≠p nh·∫≠t th√¥ng tin b√†n (Hi·ªán t·∫°i l√† S·ªë gh·∫ø v√† tr·∫°ng th√°i)
      operationId: updateTable
      parameters:
        - name: id
          in: path
          description: Id c·ªßa b√†n c·∫≠p nh·∫≠t
          required: true
          schema:
            type: string
            format: MongoId
            example: "6908bd8b93418ddd670d7098" 
      requestBody:
        description: C√°c tr∆∞·ªùng c·∫ßn c·∫≠p nh·∫≠t. B·∫°n c√≥ th·ªÉ g·ª≠i 1 trong 2 tr∆∞·ªùng, ho·∫∑c c·∫£ 2.
        required: true # B·∫£n th√¢n object body l√† b·∫Øt bu·ªôc, nh∆∞ng c√°c tr∆∞·ªùng b√™n trong l√† kh√¥ng
        content:
          application/json:
            schema:
              # Tham chi·∫øu ƒë·∫øn m·ªôt schema m·ªõi ta s·∫Ω t·∫°o ·ªü b∆∞·ªõc 2
              $ref: '#/components/schemas/UpdateTableRequest'

      security:
        - BearerAuth: []
      responses:
        '200':
          description: C·∫≠p nh·∫≠t b√†n th√†nh c√¥ng. Tr·∫£ v·ªÅ th√¥ng tin b√†n ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Table' 
        '400':
          description: D·ªØ li·ªáu g·ª≠i l√™n kh√¥ng h·ª£p l·ªá
        '401':
          description: L·ªói x√°c th·ª±c (ch∆∞a ƒëƒÉng nh·∫≠p ho·∫∑c kh√¥ng c√≥ quy·ªÅn)
        '404':
          description: Kh√¥ng t√¨m th·∫•y b√†n v·ªõi ID ƒë∆∞·ª£c cung c·∫•p
  /tables/{id}/qr-token:
    patch:
      tags:
        - Table
      summary: Thay ƒë·ªïi m√£ QRCode
      description: Thay ƒë·ªïi qrToken -> thay ƒë·ªïi QRCode
      operationId: regenerateQrToken
      parameters:
        - name: id
          in: path
          description: Id c·ªßa b√†n c·∫≠p nh·∫≠t
          required: true
          schema:
            type: string
            format: MongoId
            example: "6908bd8b93418ddd670d7098" 
      security:
        - BearerAuth: []
      responses:
        '200':
          description: C·∫≠p nh·∫≠t b√†n th√†nh c√¥ng. Tr·∫£ v·ªÅ th√¥ng tin b√†n ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: 
                    type: string
                    example: "QR token regenerated successfully."
                  table:
                    type: object
                    properties:
                      orderUrl: 
                        type: string
                        example: "https://your-app-frontend.com/order?token=0d1b932af96cc87a3e575e0cfbb1aba7dba64713"
                      QRtable: 
                        type: string
                        example: "data:image/png;base64,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"

        '400':
          description: D·ªØ li·ªáu g·ª≠i l√™n kh√¥ng h·ª£p l·ªá
        '401':
          description: L·ªói x√°c th·ª±c (ch∆∞a ƒëƒÉng nh·∫≠p ho·∫∑c kh√¥ng c√≥ quy·ªÅn)
        '404':
          description: Kh√¥ng t√¨m th·∫•y b√†n v·ªõi ID ƒë∆∞·ª£c cung c·∫•p
  
  # ƒê√£ xong
  /suppliers:
    get:
      tags:
        - Supplier
      summary: Get All Suppliers
      operationId: getAllSuppliers
      security:
        - BearerAuth: []
      parameters:
        - name: search
          in: query
          schema:
            type: string
          description: T√¨m ki·∫øm theo t√™n nh√† cung c·∫•p, email, ng∆∞·ªùi li√™n h·ªá ho·∫∑c s·ªë ƒëi·ªán tho·∫°i.
          example: "3510"
        - name: status
          in: query
          schema:
            type: string
            enum: [active, inactive]
          description: L·ªçc theo tr·∫°ng th√°i
          example: "active"
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Trang hi·ªán t·∫°i
          example: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 5
          description: S·ªë l∆∞·ª£ng b·∫£n ghi tr√™n m·ªôt trang
          example: 5
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Get all suppliers success"
                  result:
                    type: object
                    properties:
                      suppliers:
                        type: array
                        items:
                          type: object
                          properties:
                            _id:
                              type: string
                              example: "69255e74949ebf8ff555f500"
                            name:
                              type: string
                              example: "Cup c·∫•p g·∫°o"
                            taxCode:
                              type: string
                              example: "TX12345633"
                            status:
                              type: string
                              example: "active"
                            contactPerson:
                              type: string
                              example: "H·ªìng H·∫°nh"
                            phone:
                              type: string
                              example: "+84327593510"
                            email:
                              type: string
                              example: "contact@honghanhtextile.com"
                            address:
                              type: string
                              example: "123 Nguyen Trai Street, District 5, Ho Chi Minh City"
                      pagination:
                        type: object
                        properties:
                          currentPage:
                            type: integer
                            example: 1
                          limit:
                            type: integer
                            example: 5
                          total:
                            type: integer
                            example: 1
                          totalPage:
                            type: integer
                            example: 1
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "accesstoken is require"
    post:
      tags:
        - Supplier
      summary: Create Supplier
      operationId: createSupplier
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  maxLength: 50
                  example: "Cung c·∫•p g·∫°o"
                taxCode:
                  type: string
                  minLength: 5
                  maxLength: 20
                  description: Ch·ªâ ch·ª©a ch·ªØ v√† s·ªë
                  example: "TX12345633"
                status:
                  type: string
                  enum: [active, inactive]
                  example: "active"
                contactPerson:
                  type: string
                  example: "H·ªìng H·∫°nh"
                phone:
                  type: string
                  example: "+84327593510"
                email:
                  type: string
                  format: email
                  example: "contact@honghanhtextile.com"
                address:
                  type: string
                  example: "123 Nguyen Trai Street, District 5, Ho Chi Minh City"
              required:
                - name
                - taxCode
                - status
                - contactPerson
                - phone
                - email
                - address
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Supplier created successfully."
                  result:
                    type: object
                    properties:
                      _id:
                        type: string
                        example: "69255e74949ebf8ff555f500"
                      name:
                        type: string
                        example: "Cup c·∫•p g·∫°o"
                      taxCode:
                        type: string
                        example: "TX12345633"
                      status:
                        type: string
                        example: "active"
                      contactPerson:
                        type: string
                        example: "H·ªìng H·∫°nh"
                      phone:
                        type: string
                        example: "+84327593510"
                      email:
                        type: string
                        example: "contact@honghanhtextile.com"
                      address:
                        type: string
                        example: "123 Nguyen Trai Street, District 5, Ho Chi Minh City"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "accesstoken is require"
        '422':
          description: Unprocessable Entity (Validation Error)
          content:
            application/json:
              schema:
                type: object
              examples:
                TaxCodeError:
                  summary: Tax Code sai ƒë·ªãnh d·∫°ng/ƒë·ªô d√†i
                  value:
                    message: "Validation error"
                    errors:
                      taxCode: "Tax code length must be between 5 and 20 characters"
                EmailError:
                  summary: Email kh√¥ng h·ª£p l·ªá
                  value:
                    message: "Validation error"
                    errors:
                      email: "Email is invalid"
  /suppliers/{supplier_id}:
    patch:
      tags:
        - Supplier
      summary: Update Supplier
      operationId: updateSupplier
      security:
        - BearerAuth: []
      parameters:
        - name: supplier_id
          in: path
          required: true
          schema:
            type: string
          description: ID c·ªßa nh√† cung c·∫•p c·∫ßn c·∫≠p nh·∫≠t
          example: "69255e74949ebf8ff555f500"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  maxLength: 50
                  example: "Cup c·∫•p g·∫°o"
                taxCode:
                  type: string
                  minLength: 5
                  maxLength: 20
                  example: "TX12345679"
                status:
                  type: string
                  enum: [active, inactive]
                  example: "active"
                contactPerson:
                  type: string
                  example: "H·ªìng H·∫°nh"
                phone:
                  type: string
                  example: "+84981239876"
                email:
                  type: string
                  format: email
                  example: "contact@honghanhtextile.com"
                address:
                  type: string
                  example: "123 Nguyen Trai Street, District 5, Ho Chi Minh City"
              # Kh√¥ng c√≥ key 'required' v√¨ c√°c tr∆∞·ªùng ƒë·ªÅu l√† optional
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Supplier updated successfully."
                  result:
                    type: object
                    properties:
                      _id:
                        type: string
                        example: "69255e74949ebf8ff555f500"
                      name:
                        type: string
                        example: "Cup c·∫•p g·∫°o"
                      taxCode:
                        type: string
                        example: "TX12345633"
                      status:
                        type: string
                        example: "active"
                      contactPerson:
                        type: string
                        example: "H·ªìng H·∫°nh"
                      phone:
                        type: string
                        example: "+84327593510"
                      email:
                        type: string
                        example: "contact@honghanhtextile.com"
                      address:
                        type: string
                        example: "123 Nguyen Trai Street, District 5, Ho Chi Minh City"
        '400':
          description: Bad Request (ID kh√¥ng h·ª£p l·ªá)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid MongoDB Id format"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "accesstoken is require"
        '404':
          description: Not Found (Kh√¥ng t√¨m th·∫•y nh√† cung c·∫•p)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Supplier not found"
        '422':
          description: Unprocessable Entity (Validation Error - D·ªØ li·ªáu g·ª≠i l√™n kh√¥ng ƒë√∫ng quy ƒë·ªãnh)
          content:
            application/json:
              schema:
                type: object
              examples:
                InvalidFormat:
                  summary: Sai ƒë·ªãnh d·∫°ng (Email/Phone)
                  value:
                    message: "Validation error"
                    errors:
                      email: "Email is invalid"
                      phone: "Phone number is invalid"
                InvalidValue:
                  summary: Sai gi√° tr·ªã (TaxCode/Status)
                  value:
                    message: "Validation error"
                    errors:
                      taxCode: "Tax code length must be between 5 and 20 characters"
                      status: "Status must be active or inactive"
    delete:
      tags:
        - Supplier
      summary: Delete Supplier
      operationId: deleteSupplier
      security:
        - BearerAuth: []
      parameters:
        - name: supplier_id
          in: path
          required: true
          schema:
            type: string
          description: ID c·ªßa nh√† cung c·∫•p c·∫ßn x√≥a
          example: "69255e74949ebf8ff555f500"
      responses:
        '200':
          description: OK (X√≥a th√†nh c√¥ng)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Delete supplier successfully."
        '400':
          description: Bad Request (ID sai ƒë·ªãnh d·∫°ng)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "The provided ID is not a valid MongoDB ObjectId format."
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "accesstoken is require"
        '404':
          description: Not Found (Kh√¥ng t√¨m th·∫•y nh√† cung c·∫•p)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Supplier not found"
  
  /permissions:
    post:
      tags:
          - Permission
      summary: T·∫°o m·ªõi quy·ªÅn
      description: T·∫°o m·ªõi quy·ªÅn
      operationId: createPermission
      requestBody:
        description: Th√¥ng tin t·∫°o m·ªõi quy·ªÅn
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/createPermissionReqBody'
        required: true
      security:
        - BearerAuth: [] 
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: 
                    type: string
                    example: "Create permission successfully."
                  result: 
                    type: object
                    description: Quy·ªÅn v·ª´a ƒë∆∞·ª£c t·∫°o m·ªõi
                    $ref: '#/components/schemas/Permission'
        '401':
          description: Access token is required
        '422':
          description: Validation error
    get:
      tags:
        - Permission
      summary: Get all permissions
      description: L·∫•y danh s√°ch t·∫•t c·∫£ quy·ªÅn trong h·ªá th·ªëng.
      operationId: getAllPermission
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Get all permissions success
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Get all permissions success
                  result:
                    type: array
                    items:
                      $ref: "#/components/schemas/Permission"
  /permission/{permission_id}:
    put:
      tags:
        - Permission
      summary: Update a permission
      description: C·∫≠p nh·∫≠t th√¥ng tin c·ªßa m·ªôt quy·ªÅn.
      operationId: changePermiison
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: ID c·ªßa permission c·∫ßn c·∫≠p nh·∫≠t
          schema:
            type: string
            example: 6915916c7d31b24b66fd0c14
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdatePermissionReqBody"
            example:
              name: create_table
              description: Create a new table in the restaurant.
              module: table
      responses:
        "200":
          description: Update permission successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Update permission successfully.
                  result:
                    $ref: "#/components/schemas/Permission"
              example:
                message: Update permission successfully.
                result:
                  _id: 6915916c7d31b24b66fd0c14
                  name: create_table
                  description: Create a new table in the restaurant.
                  module: table
    delete:
      tags:
        - Permission
      summary: Delete a permission
      description: X√≥a m·ªôt quy·ªÅn theo ID.
      operationId: deletePermiison
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: ID c·ªßa permission c·∫ßn x√≥a
          schema:
            type: string
            example: 6915916c7d31b24b66fd0c14
      responses:
        "200":
          description: Delete permission successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Delete permission successfully
              example:
                message: Delete permission successfully
        '400':
          description: The provided ID is not a valid MongoDB ObjectId format.
        '401':
          description: Access token is required
        '404':
          description: Permiission not found

  /roles: 
    post:
      tags:
        - Role
      summary: Create a new role
      description: T·∫°o m·ªôt vai tr√≤ m·ªõi v·ªõi danh s√°ch quy·ªÅn.
      operationId: createRole
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateRoleReqBody"
            example:
              name: Employee 1
              description: ""
              status: active
              permissionIds: ["6915915c7d31b24b66fd0c13","6915917c7d31b24b66fd0c15"]
      responses:
        "201":
          description: Create role successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Create role successfully.
                  result:
                    $ref: "#/components/schemas/Role"
              example:
                message: Create role successfully.
                result:
                  _id: 691aa3757800bd3806be2595
                  name: Employee 1
                  description: ""
                  status: active
                  permissionIds: ["6915915c7d31b24b66fd0c13","6915917c7d31b24b66fd0c15"]
    get:
      tags:
        - Role
      summary: Get all roles
      description: L·∫•y danh s√°ch t·∫•t c·∫£ vai tr√≤, k√®m chi ti·∫øt quy·ªÅn.
      operationId: getAllRoles
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Get all roles successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Get all roles successfully.
                  result:
                    type: array
                    items:
                      $ref: "#/components/schemas/RoleWithPermissions"
              example:
                message: Get all roles successfully.
                result:
                  - _id: 6911a5cbd2c16ce645a813a0
                    name: Admin
                    description: Admin's permissions
                    status: active
                    permissions:
                      - _id: 691593007d31b24b66fd0c2d
                        name: update_role
                        module: role
                      - _id: 6915918d7d31b24b66fd0c16
                        name: delete_table
                        module: table
                  - _id: 691a9a6f7800bd3806be258e
                    name: Employee
                    description: ""
                    status: active
                    permissions: []
                  - _id: 691aa3757800bd3806be2595
                    name: Employee 1
                    description: ""
                    status: active
                    permissions: []
  /roles/{role_id}:
    put:
      operationId: updateRole
      tags:
        - Role
      summary: Update a role
      description: C·∫≠p nh·∫≠t th√¥ng tin c·ªßa m·ªôt role, bao g·ªìm danh s√°ch permissionIds.
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: ID c·ªßa role c·∫ßn update
          schema:
            type: string
            example: 6911a5cbd2c16ce645a813a0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateRoleReqBody"
            example:
              name: Admin
              description: Admin's permissions
              status: active
              permissionIds: [
                "6915919f7d31b24b66fd0c17",
                "6915915c7d31b24b66fd0c13",
                "6915917c7d31b24b66fd0c15"
              ]
      responses:
        "200":
          description: Update role successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Update role successfully.
                  result:
                    $ref: "#/components/schemas/Role"
              example:
                message: Update role successfully.
                result:
                  _id: 6911a5cbd2c16ce645a813a0
                  name: Admin
                  description: Admin's permissions
                  status: active
                  permissionIds: [
                    "6915919f7d31b24b66fd0c17",
                    "6915915c7d31b24b66fd0c13",
                    "6915917c7d31b24b66fd0c15",
                    "6915918d7d31b24b66fd0c16",
                    "6915916c7d31b24b66fd0c14",
                    "691592587d31b24b66fd0c23",
                    "691592807d31b24b66fd0c25",
                  ]
    delete:
      operationId: deleteRole
      tags:
        - Role
      summary: Delete a role
      description: X√≥a m·ªôt role theo ID.
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: ID c·ªßa role c·∫ßn x√≥a
          schema:
            type: string
            example: 691aa3757800bd3806be2595
      responses:
        "200":
          description: Delete role successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Delete role successfully.
              example:
                message: Delete role successfully.
  
  /ingredients:
    post:
      tags:
        -  Ingredient
      summary: Create Ingredient
      operationId: createIngredient
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 2
                  description: T√™n nguy√™n li·ªáu (t·ªëi thi·ªÉu 2 k√Ω t·ª±)
                  example: "Th·ªãt heo"
                categoryId:
                  type: string
                  description: MongoID c·ªßa danh m·ª•c
                  example: "69254fee3b367e7f37bfff12"
                unit:
                  type: string
                  description: ƒê∆°n v·ªã t√≠nh (kg, l√≠t, c√°i...)
                  example: "kg"
                minStock:
                  type: integer
                  minimum: 1
                  description: M·ª©c t·ªìn kho t·ªëi thi·ªÉu (ph·∫£i > 0)
                  example: 20
                supplierIds:
                  type: array
                  description: Danh s√°ch ID c√°c nh√† cung c·∫•p (Optional)
                  items:
                    type: string
                    example: "69255cd36d1d50a5f158f868"
                  example: ["69255cd36d1d50a5f158f868", "6926c6a7349187bd6ac5f21c"]
              required:
                - name
                - categoryId
                - unit
                - minStock
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Ingredient created successfully."
                  result:
                    type: object
                    properties:
                      _id:
                        type: string
                        example: "6927fb42cf4d3b71b47c5938"
                      name:
                        type: string
                        example: "Th·ªãt heo"
                      categoryId:
                        type: string
                        example: "69254fee3b367e7f37bfff12"
                      unit:
                        type: string
                        example: "kg"
                      unitPrice:
                        type: number
                        description: Gi√° m·∫∑c ƒë·ªãnh l√† 0 khi t·∫°o m·ªõi
                        example: 0
                      supplierIds:
                        type: array
                        items:
                          type: string
                        example: []
                      currentStock:
                        type: integer
                        example: 0
                      minStock:
                        type: integer
                        example: 20
        '400':
          description: Bad Request (L·ªói ƒë·ªãnh d·∫°ng Category ID)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Category ID is invalid"
                  status:
                    type: integer
                    example: 400
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "accesstoken is require"
        '422':
          description: Unprocessable Entity (Validation Error)
          content:
            application/json:
              schema:
                type: object
              examples:
                InvalidData:
                  summary: D·ªØ li·ªáu kh√¥ng h·ª£p l·ªá
                  value:
                    message: "Validation error"
                    errors:
                      name: "Ingredient name must be at least 2 chars"
                      minStock: "Min stock must be a positive integer"
                      supplierIds: "Array contains invalid Supplier ID"
    get:
      tags:
        - Ingredient
      summary: Get All Ingredients
      operationId: getAllIngredients
      security:
        - BearerAuth: []
      parameters:
        - name: search
          in: query
          schema:
            type: string
          description: T√¨m ki·∫øm theo t√™n nguy√™n li·ªáu
          example: "th·ªãt"
        - name: status
          in: query
          schema:
            type: string
            enum: [in_stock, low_stock, out_of_stock]
          description: |
            L·ªçc theo tr·∫°ng th√°i t·ªìn kho:
            - in_stock: C√≤n h√†ng (currentStock > minStock)
            - low_stock: S·∫Øp h·∫øt (0 < currentStock <= minStock)
            - out_of_stock: H·∫øt h√†ng (currentStock = 0)
          example: "in_stock"
        - name: supplierId
          in: query
          schema:
            type: string
          description: L·ªçc theo ID nh√† cung c·∫•p
          example: "6925d6a45b616421690a7150"
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Trang hi·ªán t·∫°i
        - name: limit
          in: query
          schema:
            type: integer
            enum: [10, 15, 20]
            default: 10
          description: S·ªë l∆∞·ª£ng b·∫£n ghi tr√™n m·ªôt trang (ch·ªâ ch·∫•p nh·∫≠n 10, 15 ho·∫∑c 20)
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Ingredients retrieved successfully"
                  result:
                    type: object
                    properties:
                      ingredients:
                        type: array
                        items:
                          type: object
                          properties:
                            _id:
                              type: string
                              example: "6927fb42cf4d3b71b47c5938"
                            name:
                              type: string
                              example: "Th·ªãt heo"
                            unit:
                              type: string
                              example: "kg"
                            unitPrice:
                              type: number
                              example: 0
                            currentStock:
                              type: integer
                              example: 0
                            minStock:
                              type: integer
                              example: 20
                            categoryName:
                              type: string
                              example: "Meat"
                            supplierNames:
                              type: array
                              items:
                                type: object
                                properties:
                                  _id:
                                    type: string
                                    example: "69255cd36d1d50a5f158f868"
                                  name:
                                    type: string
                                    example: "Cung c·∫•p th·ªãt"
                      pagination:
                        type: object
                        properties:
                          currentPage:
                            type: integer
                            example: 1
                          limit:
                            type: integer
                            example: 10
                          total:
                            type: integer
                            example: 1
                          totalPage:
                            type: integer
                            example: 1
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "accesstoken is require"
  /ingredients/{id}:
    patch:
      tags:
        - Ingredient
      summary: Update Ingredient
      operationId: updateIngredient
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: ID c·ªßa nguy√™n li·ªáu c·∫ßn c·∫≠p nh·∫≠t
          example: "6927fb42cf4d3b71b47c5938"
      requestBody:
        description: Ch·ªâ cho ph√©p c·∫≠p nh·∫≠t Category, MinStock v√† SupplierIDs
        content:
          application/json:
            schema:
              type: object
              properties:
                categoryId:
                  type: string
                  description: MongoID c·ªßa danh m·ª•c m·ªõi
                  example: "69254fee3b367e7f37bfff12"
                minStock:
                  type: integer
                  minimum: 0
                  description: M·ª©c t·ªìn kho t·ªëi thi·ªÉu m·ªõi
                  example: 10
                supplierIds:
                  type: array
                  description: Danh s√°ch ID nh√† cung c·∫•p m·ªõi
                  items:
                    type: string
                  example: ["69255cd36d1d50a5f158f868"]
              # C√°c tr∆∞·ªùng l√† optional, kh√¥ng b·∫Øt bu·ªôc g·ª≠i h·∫øt
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Ingredient updated successfully."
                  data: # Ch√∫ √Ω: Key n√†y l√† data theo ·∫£nh Postman
                    type: object
                    properties:
                      _id:
                        type: string
                        example: "6927fb42cf4d3b71b47c5938"
                      name:
                        type: string
                        example: "Th·ªãt heo"
                      unit:
                        type: string
                        example: "kg"
                      unitPrice:
                        type: number
                        example: 0
                      currentStock:
                        type: integer
                        example: 0
                      minStock:
                        type: integer
                        example: 10
                      categoryName:
                        type: string
                        example: "Meat"
                      suppliers:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              example: "69255cd36d1d50a5f158f868"
                            name:
                              type: string
                              example: "Cung c·∫•p th·ªãt"
        '400':
          description: Bad Request (ID kh√¥ng h·ª£p l·ªá)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid MongoDB Id format"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "accesstoken is require"
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Ingredient not found"
        '422':
          description: Unprocessable Entity (Validation Error)
          content:
            application/json:
              schema:
                type: object
              examples:
                InvalidData:
                  summary: D·ªØ li·ªáu kh√¥ng h·ª£p l·ªá
                  value:
                    message: "Validation error"
                    errors:
                      minStock: "Min stock must be a positive integer"
                      categoryId: "Category ID is invalid"
    delete:
      tags:
        - Ingredient
      summary: Delete Ingredient
      operationId: deleteIngredient
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: ID c·ªßa nguy√™n li·ªáu c·∫ßn x√≥a
          example: "6927fb42cf4d3b71b47c5938"
      responses:
        '200':
          description: OK (X√≥a th√†nh c√¥ng)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Delete ingredient successfully"
        '400':
          description: Bad Request (ID sai ƒë·ªãnh d·∫°ng)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid MongoDB Id format"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "accesstoken is require"
        '404':
          description: Not Found (Kh√¥ng t√¨m th·∫•y nguy√™n li·ªáu)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Ingredient not found"
  
  /import-orders:
    post:
      tags:
        - Import Orders
      summary: Create a new import order
      operationId: createImportOrder
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                supplierId:
                  type: string
                status:
                  $ref: "#/components/schemas/ImportOrderStatus"
                importDate:
                  type: string
                  format: date
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      ingredientId:
                        type: string
                      quantity:
                        type: number
                      importPrice:
                        type: number

                taxRate:
                  type: number
                  description: Optional tax rate (%)
                  example: 5

                notes:
                  type: string
                  description: Optional notes for the import order
                  example: "H√†ng giao bu·ªïi s√°ng"

              required:
                - supplierId
                - importDate
                - items

            example:
              supplierId: "690dad4474beb3c7ee4df922"
              importDate: "2025-11-17"
              status: "confirmed"
              items:
                - ingredientId: "691ae1a9885a522575e5a0ad"
                  quantity: 10
                  importPrice: 5.5
                - ingredientId: "690dad4474beb3c7ee4df922"
                  quantity: 100
                  importPrice: 2.5
              taxRate: 5
              notes: "H√†ng giao bu·ªïi s√°ng"

              

      responses:
        201:
          description: Import order created
          content:
            application/json:
              example:
                message: "Import order created successfully"

    get:
      tags:
        - Import Orders
      summary: Get list of import orders
      operationId: getImportOrders
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
            example: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
            example: 10
        - in: query
          name: search
          schema:
            type: string
            example: "B1WG"
        - in: query
          name: status
          schema:
            $ref: "#/components/schemas/ImportOrderStatus"
          example: confirmed
        - in: query
          name: supplierId
          schema:
            type: string
            example: "690dad4474beb3c7ee4df922"
        - in: query
          name: dateFrom
          schema:
            type: string
            format: date
            example: "2025-11-16"
        - in: query
          name: dateTo
          schema:
            type: string
            format: date
            example: "2025-11-20"

      responses:
        200:
          description: List of import orders
          content:
            application/json:
              example:
                message: "Import orders retrieved successfully"
                data:
                  importOrders:
                    - _id: "691b2f06c8ffd89b56cfa46e"
                      orderNumber: "PO-20251117-RCMN"
                      importDate: "2025-11-16T17:00:00.000Z"
                      status: "confirmed"
                      items:
                        - ingredientId: "691ae1a9885a522575e5a0ad"
                          ingredientName: "Thit bo"
                          quantity: 10
                          importPrice: 5.5
                          total: 55
                      subtotal: 55
                      taxRate: 5
                      taxAmount: 2.75
                      totalAmount: 57.75
                      supplierName: "Hieu Bui 234"
                      importedByName: "Gao red"
                  pagination:
                    currentPage: 1
                    limit: 10
                    total: 1
                    totalPages: 1
  /import-orders/{id}:
    get:
      tags:
        - Import Orders
      summary: Get import order detail
      operationId: getImportOrderDetail
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          example: "691b2ed8c8ffd89b56cfa46d"

      responses:
        200:
          description: Import order detail
          content:
            application/json:
              example:
                message: "Import order detail retrieved successfully"
                data:
                  _id: "691b2ed8c8ffd89b56cfa46d"
                  orderNumber: "PO-20251117-1I97"
                  importDate: "2025-11-16T17:00:00.000Z"
                  status: "confirmed"
                  items:
                    - ingredientId: "690dad4474beb3c7ee4df922"
                      ingredientName: "G·∫°o ST25"
                      quantity: 100
                      importPrice: 2.5
                      total: 250
                      unit: "kg"
                    - ingredientId: "691ae1a9885a522575e5a0ad"
                      ingredientName: "Thit bo"
                      quantity: 10
                      importPrice: 4.5
                      total: 45
                      unit: "kg"
                  subtotal: 295
                  taxRate: 5
                  taxAmount: 14.75
                  totalAmount: 309.75
                  notes: "H√†ng giao bu·ªïi s√°ng"
                  importedByName: "Gao red"
                  supplierName: "Hieu Bui 234"

  # ƒê√£ xong
  /categories:
    get:
      tags:
        - Category Ingredient
      summary: Get All Categories ingredient
      description: L·∫•y danh s√°ch danh m·ª•c nguy√™n li·ªáu c√≥ h·ªó tr·ª£ ph√¢n trang v√† t√¨m ki·∫øm.
      operationId: getAllCategories
      security:
        - BearerAuth: []
      parameters:
        - name: search
          in: query
          schema:
            type: string
          description: T·ª´ kh√≥a t√¨m ki·∫øm (t√™n danh m·ª•c)
          example: "a v"
        - name: status
          in: query
          schema:
            type: string
            enum: [active, inactive]
          description: L·ªçc theo tr·∫°ng th√°i (active/inactive)
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Trang hi·ªán t·∫°i
        - name: limit
          in: query
          schema:
            type: integer
            default: 5
          description: S·ªë l∆∞·ª£ng b·∫£n ghi tr√™n m·ªôt trang, cho ph√©p [5, 10, 15]
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Get all categories success"
                  result:
                    type: object
                    properties:
                      categories:
                        type: array
                        items:
                          type: object
                          properties:
                            _id:
                              type: string
                              example: "672551d4b130bafac43d0559"
                            name:
                              type: string
                              example: "Gia v·ªã"
                            description:
                              type: string
                              example: "Category gia v·ªã."
                            status:
                              type: string
                              example: "active"
                      pagination:
                        type: object
                        properties:
                          currentPage:
                            type: integer
                            example: 1
                          limit:
                            type: integer
                            example: 10
                          total:
                            type: integer
                            example: 1
                          totalPage:
                            type: integer
                            example: 1
    post:
      tags:
        - Category Ingredient
      summary: Create Category
      operationId: createCategory
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "Gia v·ªã 1"
                description:
                  type: string
                  example: "Category gia v·ªã."
                status:
                  type: string
                  enum: [active, inactive]
                  example: "active"
              required:
                - name
                - description
                - status
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Category created successfully."
                  result:
                    type: object
                    properties:
                      _id:
                        type: string
                        example: "6925543f81f594b4d5983acd"
                      name:
                        type: string
                        example: "Gia v·ªã 1"
                      description:
                        type: string
                        example: "Category gia v·ªã."
                      status:
                        type: string
                        example: "active"
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Validation error"
                  errors:
                    type: object # Ho·∫∑c array t√πy middleware format l·ªói c·ªßa b·∫°n
              examples:
                MissingFields:
                  summary: Thi·∫øu tr∆∞·ªùng b·∫Øt bu·ªôc
                  value:
                    message: "Validation error"
                    errors:
                      name: "Name is required"
                      status: "Status is required"
                InvalidEnum:
                  summary: Sai gi√° tr·ªã Status
                  value:
                    message: "Validation error"
                    errors:
                      status: "Status must be active or inactive"
                InvalidLength:
                  summary: Sai ƒë·ªô d√†i Name/Description
                  value:
                    message: "Validation error"
                    errors:
                      name: "Name length must be between 1 and 50"
  /categories/{id}:
    patch:
      tags:
        - Category Ingredient
      summary: Update Category
      operationId: updateCategory
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: ID c·ªßa danh m·ª•c c·∫ßn c·∫≠p nh·∫≠t
          example: "69254fee3b367e7f37bfff12"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "Meat"
                description:
                  type: string
                  example: "Category meat"
                status:
                  type: string
                  enum: [active, inactive]
                  example: "inactive"
              # C√°c tr∆∞·ªùng ƒë·ªÅu l√† optional n√™n kh√¥ng c√≥ key 'required' ·ªü ƒë√¢y
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Category updated successfully."
                  result:
                    type: object
                    properties:
                      _id:
                        type: string
                        example: "69254fee3b367e7f37bfff12"
                      name:
                        type: string
                        example: "Meat"
                      description:
                        type: string
                        example: "Category meat"
                      status:
                        type: string
                        example: "inactive"
        '400':
          description: Bad Request (Sai ƒë·ªãnh d·∫°ng ID)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid MongoDB Id format" # Message t·ª´ USER_MESSAGES.INVALID_MONGODB_ID_FORMAT
        '422':
          description: Validation Error (D·ªØ li·ªáu body sai)
          content:
            application/json:
              schema:
                type: object
              examples:
                InvalidBody:
                  summary: D·ªØ li·ªáu g·ª≠i l√™n kh√¥ng h·ª£p l·ªá
                  value:
                    message: "Validation error"
                    errors:
                      name: "Name must be a string"
                      status: "Status must be active or inactive"

  /dishes:
    post:
      tags:
        - Dishes
      summary: Create a new dish
      operationId: createDish
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
                  description: File ·∫£nh c·ªßa m√≥n ƒÉn (jpg, png, webp)
                name:
                  type: string
                  description: T√™n m√≥n ƒÉn
                  example: "C√°nh g√† chi√™n m·∫Øm (4 chi·∫øc)"
                price:
                  type: number
                  description: Gi√° b√°n
                  example: 85000
                description:
                  type: string
                  description: M√¥ t·∫£ m√≥n ƒÉn
                  example: "C√°nh g√† chi√™n n∆∞·ªõc m·∫Øm ƒë·∫≠m ƒë√†, da gi√≤n."
                status:
                  type: string
                  enum:
                    - available
                    - unavailable
                    - hidden
                  default: available
                  description: Tr·∫°ng th√°i kinh doanh
                categoryId:
                  type: string
                  description: ObjectId c·ªßa danh m·ª•c m√≥n ƒÉn
                  example: "692cf1c2e2c4e6ad4964e8a2"
                isFeatured:
                  type: boolean
                  default: false
                  description: ƒê√°nh d·∫•u l√† m√≥n n·ªïi b·∫≠t
                  example: true
                recipe:
                  type: string
                  description: 'Chu·ªói JSON ƒë·∫°i di·ªán cho m·∫£ng c√¥ng th·ª©c. B·∫Øt bu·ªôc format: [{"ingredientId": "...", "quantity": ...}]'
                  example: '[{"ingredientId": "692cf2c3e2c4e6ad4964e8a3", "quantity": 0.4}]'
              required:
                - name
                - description
                - price
                - image
                - status
                - categoryId
                - recipe
              
      responses:
        '201':
          description: Dish created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Dish created successfully"
                  data:
                    type: object
                    properties:
                      _id:
                        type: string
                      name:
                        type: string
                      price:
                        type: number
                      description:
                        type: string
                      image:
                        type: string
                      status:
                        type: string
                      categoryId:
                        type: string
                      isFeatured:
                        type: boolean
                      recipe:
                        type: array
                        items:
                          type: object
                          properties:
                            ingredientId:
                              type: string
                            quantity:
                              type: number
              example:
                message: "Dish created successfully"
                data:
                  _id: "692cf98aa018b5563c300239"
                  name: "C√°nh g√† chi√™n m·∫Øm (8 chi·∫øc)"
                  price: 85000
                  description: "C√°nh g√† chi√™n n∆∞·ªõc m·∫Øm ƒë·∫≠m ƒë√†, da gi√≤n."
                  image: "https://res.cloudinary.com/dpmbhsbcg/image/upload/v1764555144/restaurant-app/img_1764555142678.jpg"
                  status: "available"
                  categoryId: "692ceff06e1be3877b5ec4b3"
                  recipe:
                    - ingredientId: "692cf42ee2c4e6ad4964e8a5"
                      quantity: 0.8
                  isFeatured: false
                
        '400':
          description: L·ªói Logic Nghi·ªáp v·ª• (Business Logic Errors)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: N·ªôi dung th√¥ng b√°o l·ªói chi ti·∫øt
              examples:
                
                CategoryNotFound:
                  summary: Danh m·ª•c kh√¥ng t·ªìn t·∫°i
                  value:
                    message: "Dish category not found"

                CategoryInactive:
                  summary: Danh m·ª•c ƒëang b·ªã kh√≥a
                  value:
                    message: "Dish category is currently inactive"

                InvalidRecipeJson:
                  summary: Recipe sai ƒë·ªãnh d·∫°ng JSON
                  value:
                    message: "Recipe must be a valid JSON string (Array of objects)"

                DuplicateIngredient:
                  summary: Tr√πng l·∫∑p nguy√™n li·ªáu
                  value:
                    message: "Recipe contains duplicate ingredients. Please merge them."

                InvalidIngredients:
                  summary: Nguy√™n li·ªáu kh√¥ng h·ª£p l·ªá
                  value:
                    message: "Validation failed for ingredients. The following IDs are either non-existent or deleted: [654a..., 654b...]"

                InvalidImage:
                  summary: ·∫¢nh kh√¥ng h·ª£p l·ªá ho·∫∑c thi·∫øu
                  value:
                    message: "File type not supported (only .jpg, .jpeg, .png, .webp)"

        '422':
          description: L·ªói Validation D·ªØ li·ªáu (Input Validation Errors)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: object
              examples:
                # Tr∆∞·ªùng h·ª£p thi·∫øu tr∆∞·ªùng ho·∫∑c sai ki·ªÉu d·ªØ li·ªáu
                ValidationError:
                  summary: D·ªØ li·ªáu ƒë·∫ßu v√†o sai
                  value:
                    message: "Validation error"
                    errors:
                      price:
                        msg: "Dish price must be a number"
                        value: "abc"
                      recipe:
                        msg: "Dish recipe must be an array"
                        value: "..."
        '401':
          description: Unauthorized
        '403':
          description: Forbidden (Kh√¥ng c√≥ quy·ªÅn create_dish)
    get:
      tags:
        - Dishes
      summary: L·∫•y danh s√°ch m√≥n ƒÉn (Filter & Search)
      description: >
        L·∫•y danh s√°ch m√≥n ƒÉn c√≥ ph√¢n trang.
        H·ªó tr·ª£ t√¨m ki·∫øm theo t√™n, l·ªçc theo danh m·ª•c, tr·∫°ng th√°i, kho·∫£ng gi√° v√† m√≥n n·ªïi b·∫≠t.
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Trang s·ªë (M·∫∑c ƒë·ªãnh 1)
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: S·ªë l∆∞·ª£ng b·∫£n ghi m·ªói trang (M·∫∑c ƒë·ªãnh 10, cho ph√©p [10, 20, 30])
        - in: query
          name: search
          schema:
            type: string
          description: T·ª´ kh√≥a t√¨m ki·∫øm (T√™n m√≥n ƒÉn)
        - in: query
          name: categoryId
          schema:
            type: string
          description: L·ªçc theo ID danh m·ª•c (ObjectId)
        - in: query
          name: status
          schema:
            type: string
            enum: [available, unavailable, hidden]
          description: L·ªçc theo tr·∫°ng th√°i m√≥n
        - in: query
          name: isFeatured
          schema:
            type: boolean
          description: L·ªçc m√≥n n·ªïi b·∫≠t (true/false)
        - in: query
          name: minPrice
          schema:
            type: number
          description: L·ªçc gi√° t·ªëi thi·ªÉu
        - in: query
          name: maxPrice
          schema:
            type: number
          description: L·ªçc gi√° t·ªëi ƒëa
      responses:
        '200':
          description: L·∫•y danh s√°ch th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Get list dishes successfully"
                  data:
                    type: object
                    properties:
                      dishes:
                        type: array
                        items:
                          type: object
                          properties:
                            _id:
                              type: string
                            name:
                              type: string
                            price:
                              type: number
                            description:
                              type: string
                            image:
                              type: string
                            status:
                              type: string
                            isFeatured:
                              type: boolean
                            categoryName:
                              type: string
                              description: T√™n danh m·ª•c (Lookup)
                            recipe:
                              type: array
                              items:
                                type: object
                                properties:
                                  ingredientId:
                                    type: string
                                  quantity:
                                    type: number
                                  ingredientName:
                                    type: string
                                    description: T√™n nguy√™n li·ªáu (Lookup)
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                          limit:
                            type: integer
                          total:
                            type: integer
                          totalPages:
                            type: integer
              example:
                message: "Get list dishes successfully"
                data:
                  dishes:
                    - _id: "692cf98aa018b5563c300239"
                      name: "C√°nh g√† chi√™n m·∫Øm (8 chi·∫øc)"
                      price: 85000
                      description: "C√°nh g√† chi√™n n∆∞·ªõc m·∫Øm ƒë·∫≠m ƒë√†, da gi√≤n."
                      image: "https://res.cloudinary.com/dpmbhsbcg/image/upload/v1764555144/restaurant-app/img_1764555142678.jpg"
                      status: "available"
                      recipe:
                        - ingredientId: "692cf42ee2c4e6ad4964e8a5"
                          quantity: 0.8
                          ingredientName: "C√°nh g√†"
                      isFeatured: false
                      categoryName: "Danh m·ª•c ƒë·ªì ƒÉn nhanh"
                    - _id: "692cf925c75387d0237246bf"
                      name: "C√°nh g√† chi√™n m·∫Øm (6 chi·∫øc)"
                      price: 85000
                      description: "C√°nh g√† chi√™n n∆∞·ªõc m·∫Øm ƒë·∫≠m ƒë√†, da gi√≤n."
                      image: "https://res.cloudinary.com/dpmbhsbcg/image/upload/v1764555044/restaurant-app/img_1764555042237.jpg"
                      status: "available"
                      recipe:
                        - ingredientId: "692cf42ee2c4e6ad4964e8a5"
                          quantity: 0.6
                          ingredientName: "C√°nh g√†"
                      isFeatured: false
                      categoryName: "Danh m·ª•c ƒë·ªì ƒÉn nhanh"
                  pagination:
                    page: 1
                    limit: 10
                    total: 3
                    totalPages: 1
        '401':
          description: Unauthorized
  /dishes/{id}:
    patch:
      tags:
        - Dishes
      summary: C·∫≠p nh·∫≠t m√≥n ƒÉn
      operationId: updateDish
      description: >
        C·∫≠p nh·∫≠t th√¥ng tin m√≥n ƒÉn.
        Ch·ªâ g·ª≠i nh·ªØng tr∆∞·ªùng c·∫ßn thay ƒë·ªïi.
        N·∫øu g·ª≠i ·∫£nh m·ªõi, ·∫£nh c≈© s·∫Ω b·ªã x√≥a v√† thay th·∫ø.
        N·∫øu kh√¥ng g·ª≠i ·∫£nh, ·∫£nh c≈© ƒë∆∞·ª£c gi·ªØ nguy√™n.
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: ID c·ªßa m√≥n ƒÉn c·∫ßn s·ª≠a
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
                  description: File ·∫£nh m·ªõi (N·∫øu kh√¥ng g·ª≠i -> Gi·ªØ ·∫£nh c≈©)
                name:
                  type: string
                  description: T√™n m√≥n ƒÉn m·ªõi
                  example: "C√°nh g√† chi√™n m·∫Øm (S·ªët cay)"
                price:
                  type: number
                  description: Gi√° b√°n m·ªõi
                  example: 90000
                description:
                  type: string
                  description: M√¥ t·∫£ m·ªõi
                status:
                  type: string
                  enum: [available, unavailable, hidden]
                  description: Tr·∫°ng th√°i kinh doanh
                categoryId:
                  type: string
                  description: ID danh m·ª•c m·ªõi (Ph·∫£i t·ªìn t·∫°i v√† Active)
                isFeatured:
                  type: boolean
                  description: ƒê√°nh d·∫•u n·ªïi b·∫≠t
                recipe:
                  type: string
                  description: >
                    Chu·ªói JSON c√¥ng th·ª©c m·ªõi (s·∫Ω ghi ƒë√® c√¥ng th·ª©c c≈©).
                    Format: `[{"ingredientId": "...", "quantity": ...}]`
                  example: '[{"ingredientId": "692cf2c3e2c4e6ad4964e8a3", "quantity": 0.5}]'
      responses:
        '200':
          description: C·∫≠p nh·∫≠t th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Updated dish successfully"
                  data:
                    type: object
                    properties:
                      _id:
                        type: string
                      name:
                        type: string
                      price:
                        type: number
                      description:
                        type: string
                      image:
                        type: string
                      image_id:
                        type: string
                        description: Public ID c·ªßa ·∫£nh tr√™n Cloudinary
                      status:
                        type: string
                      categoryId:
                        type: string
                      categoryName:
                        type: string
                        description: T√™n danh m·ª•c (Lookup)
                      isFeatured:
                        type: boolean
                      recipe:
                        type: array
                        items:
                          type: object
                          properties:
                            ingredientId:
                              type: string
                            quantity:
                              type: number
                            ingredientName:
                              type: string
                              description: T√™n nguy√™n li·ªáu (Lookup)
              example:
                message: "Updated dish successfully"
                data:
                  _id: "692cf98aa018b5563c300239"
                  name: "C√°nh g√† chi√™n m·∫Øm (8 chi·∫øc)"
                  price: 85000
                  description: "C√°nh g√† chi√™n n∆∞·ªõc m·∫Øm ƒë·∫≠m ƒë√†, da gi√≤nn."
                  image: "https://res.cloudinary.com/dpmbhsbcg/image/upload/v1764561789/restaurant-app/img_1764561787028.jpg"
                  image_id: "restaurant-app/img_1764561787028"
                  status: "available"
                  categoryId: "692ceff06e1be3877b5ec4b3"
                  categoryName: "Danh m·ª•c ƒë·ªì ƒÉn nhanh"
                  isFeatured: false
                  recipe:
                    - ingredientId: "692cf42ee2c4e6ad4964e8a5"
                      quantity: 0.8
                      ingredientName: "C√°nh g√†"
        '400':
          description: L·ªói Validation ho·∫∑c Logic
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              examples:
                InvalidId:
                  summary: ID kh√¥ng h·ª£p l·ªá
                  value:
                    message: "Invalid Dish ID"
                CategoryError:
                  summary: Danh m·ª•c l·ªói
                  value:
                    message: "Dish category not found or inactive"
                IngredientError:
                  summary: Nguy√™n li·ªáu l·ªói
                  value:
                    message: "One or more ingredients in recipe are invalid"
                ImgError:
                  summary: ·∫¢nh l·ªói
                  value:
                    message: "File type not supported"
        '404':
          description: Kh√¥ng t√¨m th·∫•y
          content:
            application/json:
              example:
                message: "Dish not found"
        '401':
          description: Unauthorized

  # Xong
  /dish-categories:
    post:
      tags:
        - Dish Category
      summary: Create Dish Category
      description: T·∫°o m·ªõi danh m·ª•c m√≥n ƒÉn (Y√™u c·∫ßu upload ·∫£nh).
      operationId: createDishCategory
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
                  description: File ·∫£nh danh m·ª•c (jpg, jpeg, png, webp)
                name:
                  type: string
                  minLength: 1
                  maxLength: 50
                  example: "Burger"
                description:
                  type: string
                  maxLength: 255
                  example: "Danh m·ª•c Burger"
                display_order:
                  type: integer
                  minimum: 1
                  example: 1
                status:
                  type: string
                  enum: [active, inactive, hidden]
                  example: "active"
              required:
                - image
                - name
                - display_order
                - status
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Dish category created successfully"
                  data:
                    type: object
                    properties:
                      _id:
                        type: string
                        example: "692faffcdab9b8cb472875da"
                      name:
                        type: string
                        example: "Burger"
                      display_order:
                        type: integer
                        example: 1
                      status:
                        type: string
                        example: "active"
                      image:
                        type: string
                        example: "https://res.cloudinary.com/..."
                      description:
                        type: string
                        example: "Danh m·ª•c Burger"
        '400':
          description: Bad Request (L·ªói li√™n quan ƒë·∫øn File ho·∫∑c Logic)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  status:
                    type: integer
              examples:
                MissingFile:
                  summary: Thi·∫øu file ·∫£nh
                  value:
                    message: "Image is required"
                    status: 400
                InvalidFileType:
                  summary: ƒê·ªãnh d·∫°ng file kh√¥ng h·ªó tr·ª£
                  value:
                    message: "File type is not supported"
                    status: 400
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "accesstoken is require"
        '422':
          description: Unprocessable Entity (Validation Error)
          content:
            application/json:
              schema:
                type: object
              examples:
                ValidationError:
                  summary: L·ªói d·ªØ li·ªáu ƒë·∫ßu v√†o
                  value:
                    message: "Validation error"
                    errors:
                      name: "Category name length must be between 1 and 50"
                      display_order: "Display order must be a positive integer"
                      status: "Status is invalid"
    get:
      tags:
        - Dish Category
      summary: Get List Dish Categories
      description: L·∫•y danh s√°ch danh m·ª•c m√≥n ƒÉn c√≥ h·ªó tr·ª£ ph√¢n trang, t√¨m ki·∫øm v√† l·ªçc theo tr·∫°ng th√°i.
      operationId: getDishCategories
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Trang hi·ªán t·∫°i
        - name: limit
          in: query
          schema:
            type: integer
            enum: [5, 10, 15]
            default: 5
          description: S·ªë l∆∞·ª£ng b·∫£n ghi tr√™n m·ªôt trang (Ch·ªâ cho ph√©p 5, 10, 15)
        - name: search
          in: query
          schema:
            type: string
          description: T√¨m ki·∫øm theo t√™n ho·∫∑c m√¥ t·∫£
          example: "Burger"
        - name: status
          in: query
          schema:
            type: string
            enum: [active, inactive]
          description: L·ªçc theo tr·∫°ng th√°i ho·∫°t ƒë·ªông
          example: "active"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Get dish categories success"
                  result:
                    type: object
                    properties:
                      dishCategories:
                        type: array
                        items:
                          type: object
                          properties:
                            _id:
                              type: string
                              example: "692faffcdab9b8cb472875da"
                            name:
                              type: string
                              example: "Burger"
                            display_order:
                              type: integer
                              example: 1
                            status:
                              type: string
                              example: "active"
                            image:
                              type: string
                              example: "https://res.cloudinary.com/..."
                            description:
                              type: string
                              example: "Danh m·ª•c Burger"
                      pagination:
                        type: object
                        properties:
                          currentPage:
                            type: integer
                            example: 1
                          limit:
                            type: integer
                            example: 5
                          total:
                            type: integer
                            example: 10
                          totalPages:
                            type: integer
                            example: 2
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "accesstoken is require"
  /dish-categories/{id}:
    patch:
      tags:
        - Dish Category
      summary: Update Dish Category
      description: C·∫≠p nh·∫≠t th√¥ng tin danh m·ª•c (·∫¢nh v√† c√°c tr∆∞·ªùng kh√°c ƒë·ªÅu l√† t√πy ch·ªçn).
      operationId: updateDishCategory
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: ID c·ªßa danh m·ª•c c·∫ßn c·∫≠p nh·∫≠t
          example: "692faffcdab9b8cb472875da"
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
                  description: File ·∫£nh m·ªõi (n·∫øu mu·ªën thay ƒë·ªïi)
                name:
                  type: string
                  minLength: 1
                  maxLength: 50
                  example: "Burger Special"
                description:
                  type: string
                  maxLength: 255
                  example: "Danh m·ª•c Burger ƒë·∫∑c bi·ªát"
                display_order:
                  type: integer
                  minimum: 1
                  example: 2
                status:
                  type: string
                  enum: [active, inactive]
                  example: "inactive"
              # Kh√¥ng c√≥ required v√¨ t·∫•t c·∫£ ƒë·ªÅu optional khi update
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Dish category updated successfully"
                  data:
                    type: object
                    properties:
                      _id:
                        type: string
                        example: "692faffcdab9b8cb472875da"
                      name:
                        type: string
                        example: "Burger Special"
                      display_order:
                        type: integer
                        example: 2
                      status:
                        type: string
                        example: "inactive"
                      image:
                        type: string
                        example: "https://res.cloudinary.com/new-image-url..."
                      description:
                        type: string
                        example: "Danh m·ª•c Burger ƒë·∫∑c bi·ªát"
        '400':
          description: Bad Request (ID sai ho·∫∑c File kh√¥ng h·ª£p l·ªá)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid MongoDB Id format"
              examples:
                InvalidID:
                  summary: ID kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng
                  value:
                    message: "Category ID is invalid"
                InvalidFile:
                  summary: File ·∫£nh kh√¥ng h·ªó tr·ª£
                  value:
                    message: "File type is not supported"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "accesstoken is require"
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Dish category not found"
        '422':
          description: Unprocessable Entity (L·ªói validation d·ªØ li·ªáu g·ª≠i l√™n)
          content:
            application/json:
              schema:
                type: object
              examples:
                InvalidData:
                  summary: D·ªØ li·ªáu kh√¥ng h·ª£p l·ªá
                  value:
                    message: "Validation error"
                    errors:
                      name: "Category name length must be between 1 and 50"
                      status: "Status is invalid"

  # order b√™n admin
  /orders:
    get:
      tags:
        - Orders
      summary: L·∫•y danh s√°ch ƒë∆°n h√†ng
      description: >
        L·∫•y danh s√°ch ƒë∆°n h√†ng cho trang Admin/B·∫øp.
        H·ªó tr·ª£ ph√¢n trang, t√¨m ki·∫øm theo s·ªë b√†n, l·ªçc theo tr·∫°ng th√°i m√≥n ƒÉn v√† kho·∫£ng th·ªùi gian.
      operationId: adminGetAllOrders
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Trang hi·ªán t·∫°i
        - name: limit
          in: query
          schema:
            type: integer
            default: 15
            enum: [15, 20, 25]
          description: S·ªë l∆∞·ª£ng b·∫£n ghi m·ªói trang
        - name: status
          in: query
          schema:
            type: string
            enum: [Pending, Cooking, Served, Reject]
          description: >
            L·ªçc theo tr·∫°ng th√°i c·ªßa **m√≥n ƒÉn** (Item Status). 
            N·∫øu truy·ªÅn gi√° tr·ªã n√†y, danh s√°ch `items` trong ƒë∆°n h√†ng tr·∫£ v·ªÅ s·∫Ω ch·ªâ ch·ª©a c√°c m√≥n c√≥ tr·∫°ng th√°i t∆∞∆°ng ·ª©ng.
        - name: search
          in: query
          schema:
            type: string
          description: T√¨m ki·∫øm theo s·ªë b√†n (Table Number)
          example: "1"
        - name: dateFrom
          in: query
          schema:
            type: string
            format: date-time
          description: L·ªçc t·ª´ ng√†y (ISO string)
          example: "2025-12-08T00:00:00.000Z"
        - name: dateTo
          in: query
          schema:
            type: string
            format: date-time
          description: L·ªçc ƒë·∫øn ng√†y (ISO string)
          example: "2025-12-09T23:59:59.999Z"
      responses:
        '200':
          description: L·∫•y danh s√°ch th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Get all orders successfully"
                  data:
                    type: object
                    properties:
                      orders:
                        type: array
                        items:
                          $ref: '#/components/schemas/OrderAdminResponse'
                      total:
                        type: integer
                        example: 50
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 15
                      totalPages:
                        type: integer
                        example: 4
        '401':
          description: Unauthorized
        '403':
          description: Forbidden (Kh√¥ng c√≥ quy·ªÅn view_orders)
  /orders/{order_id}/{item_id}:
    patch:
      tags:
        - Orders
      summary: C·∫≠p nh·∫≠t tr·∫°ng th√°i m√≥n ƒÉn
      description: >
        Admin/B·∫øp c·∫≠p nh·∫≠t tr·∫°ng th√°i c·ªßa m·ªôt m√≥n ƒÉn c·ª• th·ªÉ trong ƒë∆°n h√†ng (V√≠ d·ª•: T·ª´ Pending -> Cooking).
        H√†nh ƒë·ªông n√†y s·∫Ω b·∫Øn socket `update_order_item` ƒë·ªÉ th√¥ng b√°o cho c√°c b√™n li√™n quan.
      operationId: adminUpdateOrderItemStatus
      security:
        - BearerAuth: []
      parameters:
        - name: order_id
          in: path
          required: true
          schema:
            type: string
          description: ID c·ªßa ƒë∆°n h√†ng (Order ID)
          example: "6936d080d41680e6b1977317"
        - name: item_id
          in: path
          required: true
          schema:
            type: string
          description: ID c·ªßa m√≥n ƒÉn trong ƒë∆°n (Item ID)
          example: "6936d080d41680e6b1977319"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateOrderItemStatusReqBody'
      responses:
        '200':
          description: C·∫≠p nh·∫≠t th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Update item status successfully"
                  data:
                    $ref: '#/components/schemas/OrderAdminResponse'
        '400':
          description: Tr·∫°ng th√°i kh√¥ng h·ª£p l·ªá ho·∫∑c item kh√¥ng t√¨m th·∫•y
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Invalid status"
        '401':
          description: Unauthorized

  # order b√™n kh√°ch, l∆∞u √Ω kh√¥ng d√πng path c·ªßa admin
  /guest/auth/login:
    post:
      tags:
        - Guest Auth
      summary: Guest Login
      description: ƒêƒÉng nh·∫≠p cho kh√°ch h√†ng qu√©t m√£ QR t·∫°i b√†n.
      operationId: guestLogin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                guestName:
                  type: string
                  minLength: 1
                  maxLength: 50
                  description: T√™n kh√°ch h√†ng (ƒë·ªÉ hi·ªÉn th·ªã v√† ph√¢n bi·ªát)
                  example: "John Doe"
                qrToken:
                  type: string
                  description: Token l·∫•y t·ª´ m√£ QR tr√™n b√†n
                  example: "be772197701d5c2053b6aa7850a9d7438f0f98b6"
              required:
                - guestName
                - qrToken
      responses:
        '200':
          description: OK (ƒêƒÉng nh·∫≠p th√†nh c√¥ng)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Login successfully"
                  result:
                    type: object
                    properties:
                      accessToken:
                        type: string
                        description: Token d√πng ƒë·ªÉ x√°c th·ª±c c√°c request ti·∫øp theo (ƒê·∫∑t ƒë∆°n, g·ªçi nh√¢n vi√™n...)
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                      guest:
                        type: object
                        properties:
                          id:
                            type: string
                            description: ID c·ªßa b√†n (Table ID)
                            example: "654a3b2c1d0e9f8a7b6c5d4e"
                          guestName:
                            type: string
                            example: "John Doe"
                          tableNumber:
                            type: integer
                            example: 5
                          status:
                            type: string
                            description: Tr·∫°ng th√°i hi·ªán t·∫°i c·ªßa b√†n
                            enum: [Available, Occupied, Reserved]
                            example: "Occupied"
                      currentOrderId:
                        type: string
                        nullable: true
                        description: ID ƒë∆°n h√†ng hi·ªán t·∫°i n·∫øu b√†n ƒëang c√≥ kh√°ch (d√πng ƒë·ªÉ load l·∫°i bill c≈©)
                        example: "6925d6a45b616421690a7150"
        '404':
          description: Not Found (QR Token kh√¥ng h·ª£p l·ªá)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Table not found or invalid QR token"
        '422':
          description: Unprocessable Entity (L·ªói Validation)
          content:
            application/json:
              schema:
                type: object
              examples:
                MissingName:
                  summary: Thi·∫øu t√™n kh√°ch
                  value:
                    message: "Validation error"
                    errors:
                      guestName: "Name is required"
                InvalidNameLength:
                  summary: T√™n qu√° d√†i/ng·∫Øn
                  value:
                    message: "Validation error"
                    errors:
                      guestName: "Name length must be between 1 and 50 chars"
                MissingToken:
                  summary: Thi·∫øu QR Token
                  value:
                    message: "Validation error"
                    errors:
                      qrToken: "QR Token is required"
  /guest/menu/{categoryId}/dishes:
    get:
      summary: L·∫•y danh s√°ch m√≥n ƒÉn theo danh m·ª•c (Guest)
      description: API l·∫•y danh s√°ch m√≥n ƒÉn hi·ªÉn th·ªã cho kh√°ch, c√≥ ph√¢n trang (Page-based).
      tags:
        - Guest
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: categoryId
          schema:
            type: string
            example: "692fb10fdab9b8cb472075db"
          required: true
          description: ID c·ªßa danh m·ª•c m√≥n ƒÉn (ObjectId)
        - in: query
          name: page
          schema:
            type: integer
            default: 1
            minimum: 1
          description: S·ªë trang hi·ªán t·∫°i
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
            enum: [10, 20, 30]
          description: S·ªë l∆∞·ª£ng m√≥n tr√™n m·ªôt trang
      responses:
        '200':
          description: L·∫•y d·ªØ li·ªáu th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Get menu successfully"
                  data:
                    type: object
                    properties:
                      menu:
                        type: array
                        items:
                          type: object
                          properties:
                            _id:
                              type: string
                              example: "692fded120cb0fc05c9c3376"
                            name:
                              type: string
                              example: "C√°nh g√† BBQ (6 mi·∫øng)"
                            price:
                              type: number
                              example: 129000
                            description:
                              type: string
                              example: "C√°nh g√† BBQ (6 mi·∫øng) k√®m s·ªët ƒë·∫∑c bi·ªát"
                            image:
                              type: string
                              example: "https://res.cloudinary.com/.../img.jpg"
                            image_id:
                              type: string
                              example: "restaurant-app/img_12345"
                            status:
                              type: string
                              enum: [available, unavailable]
                              example: "available"
                            categoryId:
                              type: string
                              example: "692fb10fdab9b8cb472075db"
                            recipe:
                              type: array
                              items:
                                type: object
                                properties:
                                  ingredientId:
                                    type: string
                                    example: "692cf42ee2c4e6ad4964e8a5"
                                  quantity:
                                    type: number
                                    example: 0.6
                            isFeatured:
                              type: boolean
                              example: false
                            ratingAverage:
                              type: number
                              example: 4.5
                            reviewCount:
                              type: number
                              example: 12
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                            example: 1
                          limit:
                            type: integer
                            example: 20
                          total:
                            type: integer
                            example: 2
                          totalPages:
                            type: integer
                            example: 1
        '400':
          description: L·ªói validation (V√≠ d·ª• categoryId kh√¥ng h·ª£p l·ªá)
        '401':
          description: Kh√¥ng c√≥ quy·ªÅn truy c·∫≠p (Thi·∫øu ho·∫∑c sai Access Token)
        '422':
          description: L·ªói x·ª≠ l√Ω d·ªØ li·ªáu (Unprocessable Entity)
  /guest/dish-categories:
    get:
      summary: L·∫•y danh s√°ch danh m·ª•c m√≥n ƒÉn (Guest)
      description: API l·∫•y danh s√°ch t·∫•t c·∫£ c√°c category ƒë·ªÉ hi·ªÉn th·ªã menu (Burger, Chicken, Drink...).
      tags:
        - Guest
      security:
        - BearerAuth: []
      responses:
        '200':
          description: L·∫•y danh s√°ch th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Get dish categories success"
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        _id:
                          type: string
                          description: ID c·ªßa danh m·ª•c
                          example: "692faffcdab9b8cb472075da"
                        name:
                          type: string
                          description: T√™n danh m·ª•c
                          example: "Burger"
                        display_order:
                          type: integer
                          description: Th·ª© t·ª± hi·ªÉn th·ªã
                          example: 1
                        status:
                          type: string
                          description: Tr·∫°ng th√°i ho·∫°t ƒë·ªông
                          enum: [active, inactive]
                          example: "active"
                        image:
                          type: string
                          format: uri
                          description: Link ·∫£nh ƒë·∫°i di·ªán danh m·ª•c
                          example: "https://res.cloudinary.com/dpmbhsbcg/image/upload/v1764732923/restaurant-app/img_1764732922471.jpg"
                        description:
                          type: string
                          description: M√¥ t·∫£ ng·∫Øn g·ªçn
                          example: "Danh m·ª•c Burger"
        '401':
          description: Kh√¥ng c√≥ quy·ªÅn truy c·∫≠p (Thi·∫øu ho·∫∑c sai Access Token)
  /guest/orders:
    post:
      tags:
        - Guest
      summary: Guest Place Order (ƒê·∫∑t m√≥n)
      description: |
        Kh√°ch h√†ng g·ª≠i danh s√°ch m√≥n ƒÉn mu·ªën ƒë·∫∑t. 
        - Y√™u c·∫ßu Token Guest (l·∫•y t·ª´ API Login).
        - H·ªá th·ªëng s·∫Ω ki·ªÉm tra t·ªìn kho, tr·∫°ng th√°i m√≥n ƒÉn.
        - N·∫øu th√†nh c√¥ng: Tr·ª´ kho, L∆∞u ƒë∆°n h√†ng, B·∫Øn Socket th√¥ng b√°o.
      operationId: guestCreateOrder
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderReqBody'
      responses:
        '200':
          description: ƒê·∫∑t m√≥n th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Order placed successfully"
                  data:
                    $ref: '#/components/schemas/OrderResponse'
        '400':
          description: L·ªói Business Logic (H·∫øt h√†ng, M√≥n kh√¥ng t·ªìn t·∫°i, v.v.)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  status:
                    type: integer
                    example: 400
              examples:
                OutOfStock:
                  summary: H·∫øt h√†ng
                  value:
                    message: "Dish 'C√°nh g√† chi√™n' is out of stock or not enough quantity"
                    status: 400
                DishHidden:
                  summary: M√≥n ƒë√£ b·ªã ·∫©n/ng∆∞ng b√°n
                  value:
                    message: "Dish 'Coca cola' is currently unavailable"
                    status: 400
        '401':
          description: L·ªói x√°c th·ª±c (Thi·∫øu token ho·∫∑c Token sai)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: 
                    type: string
                    example: "Access token is required" # Message t·ª´ USER_MESSAGES.ACCESS_TOKEN_IS_REQUIRED
        '403':
          description: L·ªói ph√¢n quy·ªÅn (Token ƒë√∫ng nh∆∞ng kh√¥ng ph·∫£i Guest)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message: 
                    type: string
                    example: "You are not authorized (Guest role required)"
        '422':
          description: L·ªói Validation (D·ªØ li·ªáu ƒë·∫ßu v√†o kh√¥ng h·ª£p l·ªá)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Validation error"
                  errors:
                    type: object
              examples:
                InvalidFormat:
                  summary: M·∫£ng items r·ªóng ho·∫∑c sai ƒë·ªãnh d·∫°ng
                  value:
                    message: "Validation error"
                    errors:
                      items: "Order items must be an array"
                InvalidQuantity:
                  summary: S·ªë l∆∞·ª£ng kh√¥ng h·ª£p l·ªá
                  value:
                    message: "Validation error"
                    errors:
                      "items[0].quantity": "Quantity must be a positive integer"
                InvalidDishID:
                  summary: DishID kh√¥ng ph·∫£i MongoID
                  value:
                    message: "Validation error"
                    errors:
                      "items[0].dishId": "Invalid Dish ID format"
  /guest/reviews:
    post:
      tags:
        - Guest
      summary: G·ª≠i ƒë√°nh gi√° m√≥n ƒÉn (Guest)
      description: |
        Kh√°ch h√†ng g·ª≠i ƒë√°nh gi√° cho m·ªôt m√≥n ƒÉn trong ƒë∆°n h√†ng ƒë√£ thanh to√°n.
        
        **Quy t·∫Øc nghi·ªáp v·ª•:**
        1. ƒê∆°n h√†ng ph·∫£i c√≥ tr·∫°ng th√°i thanh to√°n l√† **PAID**.
        2. Kh√°ch h√†ng ch·ªâ ƒë∆∞·ª£c ƒë√°nh gi√° ƒë∆°n c·ªßa ch√≠nh b√†n m√¨nh 
        3. M√≥n ƒÉn ph·∫£i t·ªìn t·∫°i trong ƒë∆°n h√†ng ƒë√≥.
        4. M·ªói m√≥n trong m·ªôt ƒë∆°n ch·ªâ ƒë∆∞·ª£c ƒë√°nh gi√° **1 l·∫ßn**.
        5. Sau khi ƒë√°nh gi√°, h·ªá th·ªëng t·ª± ƒë·ªông t√≠nh l·∫°i `ratingAverage` v√† `reviewCount` cho m√≥n ƒÉn.
      operationId: createGuestReview
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - orderId
                - dishId
                - rating
              properties:
                orderId:
                  type: string
                  description: ID c·ªßa ƒë∆°n h√†ng (MongoDB ObjectId)
                  example: "693f7a63e7455fa6893e7080"
                dishId:
                  type: string
                  description: ID c·ªßa m√≥n ƒÉn c·∫ßn ƒë√°nh gi√° (MongoDB ObjectId)
                  example: "692fe055d1d14ce2ee11a96e"
                rating:
                  type: integer
                  description: ƒêi·ªÉm ƒë√°nh gi√° (t·ª´ 1 ƒë·∫øn 5 sao)
                  minimum: 1
                  maximum: 5
                  example: 5
                comment:
                  type: string
                  description: N·ªôi dung nh·∫≠n x√©t (T·ªëi ƒëa 500 k√Ω t·ª±). C√≥ th·ªÉ ƒë·ªÉ tr·ªëng.
                  maxLength: 500
                  example: "M√≥n n√†y r·∫•t ngon, n∆∞·ªõc d√πng ƒë·∫≠m ƒë√†!"
      responses:
        '200':
          description: ƒê√°nh gi√° th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Review posted successfully"
                  result:
                    type: object
                    properties:
                      acknowledged:
                        type: boolean
                        example: true
                      insertedId:
                        type: string
                        description: ID c·ªßa b·∫£n ghi Review v·ª´a t·∫°o
                        example: "693f8ae7886d2e99e4cb6e25"
        '400':
          description: L·ªói Logic (Ch∆∞a thanh to√°n ho·∫∑c ƒê√£ ƒë√°nh gi√° r·ªìi)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  status:
                    type: integer
                    example: 400
              examples:
                OrderNotPaid:
                  summary: ƒê∆°n h√†ng ch∆∞a thanh to√°n
                  value:
                    message: "Order is not paid yet"
                    status: 400
                AlreadyReviewed:
                  summary: M√≥n n√†y ƒë√£ ƒë∆∞·ª£c ƒë√°nh gi√° tr∆∞·ªõc ƒë√≥
                  value:
                    message: "You have already reviewed this item in this order"
                    status: 400
        '401':
          description: Unauthorized (Ch∆∞a ƒëƒÉng nh·∫≠p)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Access token is required"
        '403':
          description: Forbidden (Kh√¥ng c√≥ quy·ªÅn ƒë√°nh gi√° ƒë∆°n n√†y)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "You are not allowed to review this order"
                  status:
                    type: integer
                    example: 403
        '404':
          description: Kh√¥ng t√¨m th·∫•y ƒê∆°n h√†ng ho·∫∑c M√≥n ƒÉn
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Order not found" # Ho·∫∑c "Dish not found in this order"
                  status:
                    type: integer
                    example: 404
        '422':
          description: L·ªói Validation (D·ªØ li·ªáu ƒë·∫ßu v√†o sai)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Validation error"
                  errors:
                    type: object
                    example:
                      rating: "Rating must be an integer from 1 to 5"
                      dishId: "Invalid Dish ID"
  /payment/qr/{orderId}:
    get:
      tags:
        - Payment
      summary: L·∫•y m√£ QR thanh to√°n (Sepay/VietQR)
      description: |
        T·∫°o v√† tr·∫£ v·ªÅ ƒë∆∞·ªùng d·∫´n ·∫£nh QR Code ƒë·ªÉ kh√°ch h√†ng chuy·ªÉn kho·∫£n.
        - D·ª±a tr√™n `totalAmount` c·ªßa ƒë∆°n h√†ng.
        - N·ªôi dung chuy·ªÉn kho·∫£n: "DH {orderId}".
      operationId: getPaymentQr
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: orderId
          schema:
            type: string
          required: true
          description: ID c·ªßa ƒë∆°n h√†ng (MongoDB ObjectId)
          example: "693f7a63e7455fa6893e7080"
      responses:
        '200':
          description: L·∫•y QR th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Get payment QR successfully"
                  data:
                    type: object
                    properties:
                      orderId:
                        type: string
                        description: ID ƒë∆°n h√†ng
                        example: "693f7a63e7455fa6893e7080"
                      totalAmount:
                        type: number
                        description: T·ªïng ti·ªÅn c·∫ßn thanh to√°n
                        example: 266000
                      paymentUrl:
                        type: string
                        description: ƒê∆∞·ªùng d·∫´n ·∫£nh QR code (ƒë∆∞·ª£c t·∫°o t·ª´ b√™n th·ª© 3 nh∆∞ Sepay)
                        example: "https://qr.sepay.vn/img?acc=0327593620&bank=MB&amount=266000&des=DH693f7a63e7455fa6893e7080"
        '404':
          description: Kh√¥ng t√¨m th·∫•y ƒë∆°n h√†ng (Order Not Found)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Order not found"
                  status:
                    type: integer
                    example: 404
        '401':
          description: Unauthorized (Ch∆∞a ƒëƒÉng nh·∫≠p ho·∫∑c Token h·∫øt h·∫°n)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Access token is required"
        '500':
          description: L·ªói Server n·ªôi b·ªô
  
  # --- GUEST REVIEWS ---
  /guest/reviews/{dishId}:
    get:
      tags:
        - Guest Reviews
      summary: L·∫•y danh s√°ch ƒë√°nh gi√° c·ªßa m√≥n ƒÉn
      description: >
        L·∫•y danh s√°ch review c·ªßa m·ªôt m√≥n ƒÉn c·ª• th·ªÉ ƒë·ªÉ hi·ªÉn th·ªã b√™n Client.
        Ch·ªâ tr·∫£ v·ªÅ c√°c review c√≥ tr·∫°ng th√°i l√† 'Active'.
      operationId: getDishReviews
      parameters:
        - name: dishId
          in: path
          required: true
          schema:
            type: string
          description: ID c·ªßa m√≥n ƒÉn
          example: "692fe855d1d14ce2ee11a96e"
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 5
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Get reviews successfully"
                  data:
                    type: object
                    properties:
                      reviews:
                        type: array
                        items:
                          $ref: '#/components/schemas/ReviewObject'
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                          limit:
                            type: integer
                          total:
                            type: integer
                          totalPages:
                            type: integer

  # /guest/reviews:
  #   post:
  #     tags:
  #       - Guest Reviews
  #     summary: Vi·∫øt ƒë√°nh gi√° m·ªõi
  #     description: >
  #       Kh√°ch h√†ng vi·∫øt ƒë√°nh gi√° cho m√≥n ƒÉn sau khi ƒë√£ mua.
  #       Y√™u c·∫ßu Token Guest.
  #     operationId: createReview
  #     security:
  #       - BearerAuth: []
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/CreateReviewReqBody'
  #     responses:
  #       '200':
  #         description: ƒê√°nh gi√° th√†nh c√¥ng
  #         content:
  #           application/json:
  #             schema:
  #               type: object
  #               properties:
  #                 message:
  #                   type: string
  #                   example: "Review posted successfully"
  #                 result:
  #                   $ref: '#/components/schemas/ReviewObject'
  #       '400':
  #         description: L·ªói logic (Ch∆∞a mua, ƒë√£ ƒë√°nh gi√° r·ªìi,...)
  #       '401':
  #         description: Unauthorized

  # --- ADMIN REVIEWS ---
  /reviews:
    get:
      tags:
        - Admin Reviews
      summary: L·∫•y danh s√°ch ƒë√°nh gi√° (Admin)
      description: >
        L·∫•y t·∫•t c·∫£ ƒë√°nh gi√° trong h·ªá th·ªëng. H·ªó tr·ª£ l·ªçc theo m√≥n ƒÉn, s·ªë sao, tr·∫°ng th√°i.
        K·∫øt qu·∫£ tr·∫£ v·ªÅ bao g·ªìm c·∫£ th√¥ng tin m√≥n ƒÉn (t√™n, ·∫£nh) ƒë·ªÉ Admin d·ªÖ theo d√µi.
      operationId: getAllReviewsAdmin
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
        - name: dishId
          in: query
          schema:
            type: string
          description: L·ªçc theo m√≥n ƒÉn
        - name: rating
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 5
          description: | 
            L·ªçc theo s·ªë sao (VD: L·ªçc c√°c b√†i 1 sao ƒë·ªÉ x·ª≠ l√Ω)
        - name: status
          in: query
          schema:
            type: string
            enum: [Active, Hidden]
          description: L·ªçc theo tr·∫°ng th√°i
      responses:
        '200':
          description: Th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Get admin reviews successfully"
                  data:
                    type: object
                    properties:
                      reviews:
                        type: array
                        items:
                          $ref: '#/components/schemas/ReviewAdminObject'
                      total:
                        type: integer
                      totalPages:
                        type: integer
  /reviews/{reviewId}/reply:
    post:
      tags:
        - Admin Reviews
      summary: Tr·∫£ l·ªùi ƒë√°nh gi√°
      description: Admin tr·∫£ l·ªùi comment c·ªßa kh√°ch.
      operationId: replyReview
      security:
        - BearerAuth: []
      parameters:
        - name: reviewId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - content
              properties:
                content:
                  type: string
                  example: "C·∫£m ∆°n b·∫°n ƒë√£ ·ªßng h·ªô qu√°n!"
      responses:
        '200':
          description: Tr·∫£ l·ªùi th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Reply submitted successfully"
  /reviews/{reviewId}/status:
    patch:
      tags:
        - Admin Reviews
      summary: ·∫®n/Hi·ªán ƒë√°nh gi√°
      description: Admin ·∫©n ƒë√°nh gi√° vi ph·∫°m ho·∫∑c hi·ªán l·∫°i ƒë√°nh gi√°.
      operationId: updateReviewStatus
      security:
        - BearerAuth: []
      parameters:
        - name: reviewId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - status
              properties:
                status:
                  type: string
                  enum: [Active, Hidden]
                  example: "Hidden"
      responses:
        '200':
          description: C·∫≠p nh·∫≠t th√†nh c√¥ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Review status updated successfully"

components:
  schemas:
    Table:
      type: object
      properties:
        _id:
          type: string
          description: ID duy nh·∫•t c·ªßa b√†n (MongoDB ObjectId)
          example: "6908bd8b93418ddd670d7098"
        number:
          type: integer
          description: S·ªë th·ª© t·ª± c·ªßa b√†n
          example: 1
        capacity:
          type: integer
          description: S·ª©c ch·ª©a c·ªßa b√†n (s·ªë ng∆∞·ªùi)
          example: 10
        status:
          $ref: '#/components/schemas/TableStatus'
        currentOrderId:
          type: string
          nullable: true
          example: null
        QRcode:
          type: string
          description: M√£ QR c·ªßa b√†n d∆∞·ªõi d·∫°ng Data URL (base64)
          example: "data:image/png;base64,iVBORw0KGgo...[d·ªØ li·ªáu base64]..."
      # C√°c tr∆∞·ªùng b·∫Øt bu·ªôc
      required:
        - _id
        - number
        - capacity
        - status
        - QRcode
    TableStatus:
      type: string
      description: Tr·∫°ng th√°i c·ªßa b√†n ƒÉn
      enum:
        - available
        - occupied
        - reserved
        - needs_cleaning
    UpdateTableRequest: 
      type: object
      description: D·ªØ li·ªáu ƒë·ªÉ c·∫≠p nh·∫≠t m·ªôt b√†n (ch·ªâ ch·ª©a c√°c tr∆∞·ªùng c√≥ th·ªÉ c·∫≠p nh·∫≠t)
      properties:
        capacity:
          type: integer
          description: S·ª©c ch·ª©a m·ªõi c·ªßa b√†n
          example: 6
        status:
          $ref: '#/components/schemas/TableStatus'
    
    Supplier:
      type: object
      properties:
        _id:
          type: string
          description: ID duy nh·∫•t c·ªßa nh√† cung c·∫•p (MongoDB ObjectId)
          example: "6912ac85d509c162b40b2e77"
        name:
          type: string
          description: T√™n nh√† cung c·∫•p
          example: "Hong Hanh 2"
        taxCode:
          type: string
          description: M√£ s·ªë thu·∫ø c·ªßa nh√† cung c·∫•p
          example: "TX12345645"
        status:
          $ref: '#/components/schemas/SupplierStatus' # Gi·∫£ ƒë·ªãnh b·∫°n c√≥ schema SupplierStatus
        contactPerson:
          type: string
          description: T√™n ng∆∞·ªùi li√™n h·ªá
          example: "Hong Hanh"
        phone:
          type: string
          description: S·ªë ƒëi·ªán tho·∫°i li√™n h·ªá
          example: "+84901234567"
        email:
          type: string
          description: ƒê·ªãa ch·ªâ email li√™n h·ªá
          example: "contact@honghanhtextile.com"
        address:
          type: string
          description: ƒê·ªãa ch·ªâ c·ªßa nh√† cung c·∫•p
          example: "123 Nguyen Trai Street, District 5, Ho Chi Minh City"
    CreateSupplierBody:
      type: object
      properties:
        name:
          type: string
          description: T√™n nh√† cung c·∫•p
          example: "Hong Hanh 2"
        taxCode:
          type: string
          description: M√£ s·ªë thu·∫ø
          example: "TX12345645"
        status:
          $ref: '#/components/schemas/SupplierStatus'
        contactPerson:
          type: string
          description: T√™n ng∆∞·ªùi li√™n h·ªá
          example: "Hong Hanh"
        phone:
          type: string
          description: S·ªë ƒëi·ªán tho·∫°i li√™n h·ªá
          example: "+84901234567"
        email:
          type: string
          description: ƒê·ªãa ch·ªâ email li√™n h·ªá
          example: "contact@honghanhtextile.com"
        address:
          type: string
          description: ƒê·ªãa ch·ªâ c·ªßa nh√† cung c·∫•p
          example: "123 Nguyen Trai Street, District 5, Ho Chi Minh City"
      required: # D·ª±a tr√™n JSON, c√≥ v·∫ª t·∫•t c·∫£ ƒë·ªÅu b·∫Øt bu·ªôc
        - name
        - taxCode
        - status
        - contactPerson
        - phone
        - email
        - address
    UpdateSupplierBody:
      type: object
      properties:
        name:
          type: string
          description: T√™n nh√† cung c·∫•p m·ªõi
          example: "Hong Hanh 2"
        taxCode:
          type: string
          description: M√£ s·ªë thu·∫ø m·ªõi
          example: "TX12345645"
        status:
          $ref: '#/components/schemas/SupplierStatus'
        contactPerson:
          type: string
          description: T√™n ng∆∞·ªùi li√™n h·ªá m·ªõi
          example: "Hong Hanh"
        phone:
          type: string
          description: S·ªë ƒëi·ªán tho·∫°i li√™n h·ªá m·ªõi
          example: "+84901234567"
        email:
          type: string
          description: ƒê·ªãa ch·ªâ email li√™n h·ªá m·ªõi
          example: "contact@honghanhtextile.com"
        address:
          type: string
          description: ƒê·ªãa ch·ªâ c·ªßa nh√† cung c·∫•p m·ªõi
          example: "123 Nguyen Trai Street, District 5, Ho Chi Minh City"
    SupplierStatus:
      type: string
      description: Tr·∫°ng th√°i c·ªßa nh√† cung c·∫•p
      enum:
        - active
        - inactive
    
    Permission: 
      type: object
      properties:
        _id:
          type: string
          description: ID duy nh·∫•t c·ªßa quy·ªÅn (MongoDB ObjectId)
          example: "691a9e5c7800bd3806be2592"
        name:
          type: string
          description: T√™n c·ªßa quy·ªÅn h·∫°n (API endpoint ho·∫∑c action)
          example: create_table
        description:
          type: string
          description: M√¥ t·∫£ chi ti·∫øt v·ªÅ ch·ª©c nƒÉng c·ªßa quy·ªÅn n√†y
          example: T·∫°o m·ªõi m·ªôt b√†n
        module:
          type: string
          description: T√™n module m√† quy·ªÅn n√†y thu·ªôc v·ªÅ 
          example: table
    createPermissionReqBody:
      type: object
      properties:
        name:
          type: string
          description: T√™n quy·ªÅn
          example: create_table
        description:
          type: string
          description: M√¥ t·∫£ quy·ªÅn
          example: T·∫°o m·ªôt b√†n ƒÉn m·ªõi
        module:
          type: string
          example: table
      required:
        - name
    UpdatePermissionReqBody:
      type: object
      properties:
        name:
          type: string
          example: create_table
        description:
          type: string
          example: Create a new table in the restaurant.
        module:
          type: string
          example: table
  
    CreateRoleReqBody:
      type: object
      required:
        - name
        - status
        - permissionIds
      properties:
        name:
          type: string
          example: Employee 1
        description:
          type: string
          example: ""
        status: 
          $ref: "#/components/schemas/RoleStatus"
        permissionIds:
          type: array
          items:
            type: string
          example: ["6915915c7d31b24b66fd0c13","6915917c7d31b24b66fd0c15"]
    Role:
      type: object
      properties:
        _id:
          type: string
          example: 691aa3757800bd3806be2595
        name:
          type: string
          example: Employee 1
        description:
          type: string
          example: ""
        status:
          $ref: "#/components/schemas/RoleStatus"
        permissionIds:
          type: array
          items:
            type: string
          example: ["6915915c7d31b24b66fd0c13","6915917c7d31b24b66fd0c15"]  
    RoleStatus:
      type: string
      description: Tr·∫°ng th√°i c·ªßa Role
      enum:
        - active
        - inactive
      example: active

    RoleWithPermissions:
      type: object
      properties:
        _id:
          type: string
          example: 6911a5cbd2c16ce645a813a0
        name:
          type: string
          example: Admin
        description:
          type: string
          example: Admin's permissions
        status:
          $ref: "#/components/schemas/RoleStatus"
        permissions:
          type: array
          items:
            $ref: "#/components/schemas/Permission"
    UpdateRoleReqBody:
      type: object
      properties:
        name:
          type: string
          example: Admin
        description:
          type: string
          example: Admin's permissions
        status:
          $ref: "#/components/schemas/RoleStatus"
        permissionIds:
          type: array
          items:
            type: string
          example: [
            "6915919f7d31b24b66fd0c17",
            "6915915c7d31b24b66fd0c13",
            "6915917c7d31b24b66fd0c15"
          ]
    
    ImportOrderStatus:
      type: string
      enum:
        - draft
        - confirmed
    ImportOrderItem:
      type: object
      properties:
        ingredientId:
          type: string
        ingredientName:
          type: string
        quantity:
          type: number
        importPrice:
          type: number
        total:
          type: number
    ImportOrder:
      type: object
      properties:
        _id:
          type: string
        orderNumber:
          type: string
        supplierId:
          type: string
        importedById:
          type: string
        importDate:
          type: string
          format: date-time
        status:
          $ref: "#/components/schemas/ImportOrderStatus"
        items:
          type: array
          items:
            $ref: "#/components/schemas/ImportOrderItem"
        subtotal:
          type: number
        taxRate:
          type: number
        taxAmount:
          type: number
        totalAmount:
          type: number
        notes:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    ImportOrderListItem:
      type: object
      properties:
        orderNumber:
          type: string
        importDate:
          type: string
          format: date-time
        status:
          type: string
        totalAmount:
          type: number
        supplierName:
          type: string
        importedByName:
          type: string
    ImportOrderDetail:
      allOf:
        - $ref: "#/components/schemas/ImportOrder"
        - type: object
          properties:
            supplierName:
              type: string
            importedByName:
              type: string
            items:
              type: array
              items:
                type: object
                properties:
                  ingredientId:
                    type: string
                  ingredientName:
                    type: string
                  unit:
                    type: string
                  quantity:
                    type: number
                  importPrice:
                    type: number
                  total:
                    type: number
    CreateImportOrderReqBody:
      type: object
      required:
        - supplierId
        - importDate
        - status
        - items
      properties:
        supplierId:
          type: string
        importDate:
          type: string
          format: date
        taxRate:
          type: number
          default: 0
        notes:
          type: string
        status:
          $ref: "#/components/schemas/ImportOrderStatus"
        items:
          type: array
          items:
            type: object
            required:
              - ingredientId
              - quantity
              - importPrice
            properties:
              ingredientId:
                type: string
              quantity:
                type: number
              importPrice:
                type: number

    # --- GUEST ORDER SCHEMAS ---
    CreateOrderReqBody:
      type: object
      required:
        - items
      properties:
        items:
          type: array
          description: Danh s√°ch c√°c m√≥n ƒÉn mu·ªën ƒë·∫∑t (B·∫Øt bu·ªôc ph·∫£i c√≥ √≠t nh·∫•t 1 m√≥n)
          items:
            type: object
            required:
              - dishId
              - quantity
            properties:
              dishId:
                type: string
                description: ID c·ªßa m√≥n ƒÉn (Mongo ObjectId)
                example: "692fe855d1d14ce2ee11a96e"
              quantity:
                type: integer
                description: S·ªë l∆∞·ª£ng (Ph·∫£i l√† s·ªë nguy√™n > 0)
                minimum: 1
                example: 2
              note:
                type: string
                description: Ghi ch√∫ cho m√≥n ƒÉn (Optional)
                example: "Kh√¥ng l·∫•y t∆∞∆°ng ·ªõt"
    OrderResponse:
      type: object
      properties:
        _id:
          type: string
          example: "6936d080d41680e6b1977317"
        tableId:
          type: string
          example: "692fab779ee9b37ecbf71d71"
        tableNumber:
          type: integer
          example: 1
        status:
          type: string
          enum: [Pending, Processing, Completed, Cancelled] # Th√™m c√°c enum th·ª±c t·∫ø c·ªßa b·∫°n
          example: "Pending"
        totalAmount:
          type: number
          description: T·ªïng ti·ªÅn c·ªßa ƒë∆°n h√†ng
          example: 386000
        createdAt:
          type: string
          format: date-time
          example: "2025-12-08T13:20:00.279Z"
        updatedAt:
          type: string
          format: date-time
          example: "2025-12-09T04:30:30.939Z"
        finishedAt:
          type: string
          format: date-time
          nullable: true
          example: null
        items:
          type: array
          items:
            type: object
            properties:
              _id:
                type: string
                description: ID ri√™ng c·ªßa t·ª´ng item trong ƒë∆°n (d√πng ƒë·ªÉ update status)
                example: "6936d080d41680e6b1977318"
              dishId:
                type: string
                example: "692fe855d1d14ce2ee11a96e"
              dishName:
                type: string
                example: "C√°nh g√† BBQ (4 mi·∫øng)"
              dishPrice:
                type: number
                example: 89000
              dishImage:
                type: string
                example: "https://res.cloudinary.com/..."
              quantity:
                type: integer
                example: 2
              note:
                type: string
                example: "Kh√¥ng l·∫•y t∆∞∆°ng ·ªõt"
              orderedBy:
                type: string
                description: T√™n ng∆∞·ªùi ƒë·∫∑t m√≥n
                example: "Minh Nguyen"
              status:
                type: string
                description: Tr·∫°ng th√°i c·ªßa t·ª´ng m√≥n (Pending, Cooking, Served, etc.)
                example: "Served"
              createdAt:
                type: string
                format: date-time
              updatedAt:
                type: string
                format: date-time

    # --- ADMIN ORDERS SCHEMAS ---
    OrderItemStatus:
      type: string
      enum: [Pending, Cooking, Served, Reject]
      description: Tr·∫°ng th√°i c·ªßa m√≥n ƒÉn

    OrderItemDetail:
      type: object
      properties:
        _id:
          type: string
          description: ID ri√™ng c·ªßa item (D√πng ƒë·ªÉ update)
          example: "6936d080d41680e6b1977319"
        dishId:
          type: string
          example: "692fea21d1d14ce2ee11a972"
        dishName:
          type: string
          example: "Khoai t√¢y chi√™n (C·ª° v·ª´a)"
        dishPrice:
          type: number
          example: 29000
        dishImage:
          type: string
          example: "https://res.cloudinary.com/..."
        quantity:
          type: integer
          example: 2
        note:
          type: string
          example: "√çt mu·ªëi"
        orderedBy:
          type: string
          description: T√™n ng∆∞·ªùi ƒë·∫∑t m√≥n
          example: "Minh Nguyen"
        status:
          $ref: '#/components/schemas/OrderItemStatus'
        managedBy:
          type: string
          description: T√™n nh√¢n vi√™n x·ª≠ l√Ω tr·∫°ng th√°i g·∫ßn nh·∫•t
          example: "Minh Admin"
        processingHistory:
          type: array
          description: L·ªãch s·ª≠ x·ª≠ l√Ω m√≥n ƒÉn
          items:
            type: object
            properties:
              status: 
                type: string
                example: "Cooking"
              updatedBy:
                type: string
                example: "Minh Admin"
              updatedAt:
                type: string
                format: date-time
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    OrderAdminResponse:
      type: object
      properties:
        _id:
          type: string
          example: "6936d080d41680e6b1977317"
        tableId:
          type: string
          example: "692fab779ee9b37ecbf71d71"
        tableNumber:
          type: integer
          example: 1
        status:
          type: string
          description: Tr·∫°ng th√°i chung c·ªßa ƒë∆°n h√†ng
          example: "Pending"
        totalAmount:
          type: number
          description: T·ªïng ti·ªÅn (Optional - c√≥ th·ªÉ t√≠nh to√°n ·ªü FE ho·∫∑c BE tr·∫£ v·ªÅ)
          example: 386000
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        items:
          type: array
          description: Danh s√°ch m√≥n ƒÉn trong ƒë∆°n
          items:
            $ref: '#/components/schemas/OrderItemDetail'

    UpdateOrderItemStatusReqBody:
      type: object
      required:
        - status
      properties:
        status:
          $ref: '#/components/schemas/OrderItemStatus'
      example:
        status: "Cooking"

    # --- REVIEW SCHEMAS ---
    CreateReviewReqBody:
      type: object
      required:
        - dishId
        - orderId
        - rating
      properties:
        dishId:
          type: string
          example: "692fe855d1d14ce2ee11a96e"
        orderId:
          type: string
          example: "693f7a63e7455fa6893e7080"
        rating:
          type: integer
          minimum: 1
          maximum: 5
          example: 5
        comment:
          type: string
          example: "M√≥n ƒÉn r·∫•t ngon, ph·ª•c v·ª• t·ªët!"
        photos:
          type: array
          items:
            type: string
          example: ["https://res.cloudinary.com/.../img1.jpg"]
    ReviewReply:
      type: object
      properties:
        content:
          type: string
          example: "C·∫£m ∆°n qu√Ω kh√°ch ƒë√£ ·ªßng h·ªô!"
        adminId:
          type: string
          description: ID c·ªßa admin tr·∫£ l·ªùi
        createdAt:
          type: string
          format: date-time
    ReviewObject:
      type: object
      description: Object review tr·∫£ v·ªÅ cho Guest
      properties:
        _id:
          type: string
        authorName:
          type: string
          example: "Minh Nguyen"
        rating:
          type: integer
          example: 5
        comment:
          type: string
          example: "Tuy·ªát v·ªùi!"
        photos:
          type: array
          items:
            type: string
        reply:
          $ref: '#/components/schemas/ReviewReply'
        createdAt:
          type: string
          format: date-time
    ReviewAdminObject:
      type: object
      description: Object review chi ti·∫øt tr·∫£ v·ªÅ cho Admin (K√®m th√¥ng tin m√≥n)
      properties:
        _id:
          type: string
        dishId:
          type: string
        dishName:
          type: string
          description: T√™n m√≥n ƒÉn (ƒë∆∞·ª£c lookup t·ª´ b·∫£ng Dish)
          example: "C√°nh g√† chi√™n m·∫Øm"
        dishImage:
          type: string
          example: "https://res.cloudinary.com/..."
        authorName:
          type: string
        rating:
          type: integer
        comment:
          type: string
        status:
          type: string
          enum: [Active, Hidden]
          example: "Active"
        reply:
          $ref: '#/components/schemas/ReviewReply'
        createdAt:
          type: string
          format: date-time
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT